<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LuckyBet - Premium Gambling Platform | Premium O'yinlar va Yutishlar</title>
    <!-- Google tag (gtag.js) for analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FC5WE1ZPJF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-FC5WE1ZPJF');
    </script>
    <!-- Tailwind CSS for rapid styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Three.js for 3D effects in games -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts for Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Base body styles with gradient background */
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0c0f1d 0%, #1a1f3d 50%, #2d1b69 100%);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        /* Add starry background effect */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, #eee, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.8), rgba(0,0,0,0)),
                radial-gradient(1px 1px at 90px 40px, #fff, rgba(0,0,0,0)),
                radial-gradient(1px 1px at 130px 80px, rgba(255,255,255,0.6), rgba(0,0,0,0));
            background-repeat: repeat;
            background-size: 200px 100px;
            animation: starsTwinkle 20s linear infinite;
            z-index: -1;
        }
        
        @keyframes starsTwinkle {
            0% { transform: translateY(0px); }
            100% { transform: translateY(-200px); }
        }
        
        /* Glass morphism effect for cards and modals */
        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        /* Game card hover effects */
        .game-card {
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            border-radius: 16px;
            overflow: hidden;
            position: relative;
        }
        
        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(245, 87, 108, 0.1), rgba(102, 126, 234, 0.1));
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1;
        }
        
        .game-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }
        
        .game-card:hover::before {
            opacity: 1;
        }
        
        .game-card > div:first-child {
            position: relative;
            z-index: 2;
        }
        
        /* Enhanced balance card with glow */
        .balance-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .balance-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: balanceGlow 3s ease-in-out infinite alternate;
        }
        
        @keyframes balanceGlow {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(10px, 10px) scale(1.05); }
        }
        
        /* Primary button with advanced hover */
        .btn-primary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 50%, #667eea 100%);
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 10px;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(245, 87, 108, 0.4);
        }
        
        .btn-primary:hover::before {
            left: 100%;
        }
        
        /* Secondary button styles */
        .btn-secondary {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 12px 24px;
            border-radius: 10px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 255, 255, 0.1);
        }
        
        /* Modal enhancements */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(5px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: modalFadeIn 0.3s ease;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal-content {
            background: linear-gradient(135deg, #1a1f3d 0%, #0c0f1d 100%);
            border-radius: 16px;
            padding: 30px;
            width: 95%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
            animation: modalSlideIn 0.3s ease;
        }
        
        @keyframes modalSlideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        /* Navigation active state */
        .nav-active {
            color: #f5576c;
            border-bottom: 3px solid #f5576c;
            padding-bottom: 8px;
        }
        
        /* Enhanced animations for games */
        .dice-rolling {
            animation: diceRoll 1.5s ease-in-out infinite;
        }
        
        @keyframes diceRoll {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(90deg) scale(1.05); }
            50% { transform: rotate(180deg) scale(1.1); }
            75% { transform: rotate(270deg) scale(1.05); }
        }
        
        .coin-flipping {
            animation: coinFlip 1.2s ease-in-out infinite;
        }
        
        @keyframes coinFlip {
            0%, 100% { transform: rotateY(0deg); }
            50% { transform: rotateY(1800deg); }
        }
        
        .slot-spinning {
            animation: slotSpin 0.8s linear infinite;
        }
        
        @keyframes slotSpin {
            0% { transform: translateY(0); }
            100% { transform: translateY(-120px); }
        }
        
        .wheel-spinning {
            animation: wheelSpin 3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        @keyframes wheelSpin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(1440deg); }
        }
        
        .card-flip {
            animation: cardFlip 0.8s ease-in-out;
        }
        
        @keyframes cardFlip {
            0% { transform: perspective(1000px) rotateY(0deg); }
            50% { transform: perspective(1000px) rotateY(90deg); }
            100% { transform: perspective(1000px) rotateY(0deg); }
        }
        
        .number-spin {
            animation: numberSpin 1.2s ease-in-out;
        }
        
        @keyframes numberSpin {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.1); }
            100% { transform: rotate(360deg) scale(1); }
        }
        
        .color-flash {
            animation: colorFlash 0.6s ease-in-out;
        }
        
        @keyframes colorFlash {
            0%, 100% { background-color: transparent; }
            50% { background-color: #f5576c; transform: scale(1.05); }
        }
        
        /* Three.js container for 3D roulette or wheel */
        #three-container {
            width: 100%;
            height: 350px;
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 24px;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }
        
        /* Enhanced slot machine styles */
        .slot-machine {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 24px;
            padding: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
        }
        
        .slot-reel {
            width: 90px;
            height: 140px;
            background: linear-gradient(180deg, #4a5568 0%, #2d3748 100%);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            box-shadow: inset 0 0 15px rgba(0,0,0,0.7), 0 4px 8px rgba(0,0,0,0.3);
        }
        
        .slot-symbol {
            height: 140px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s ease;
        }
        
        .slot-symbol:hover {
            transform: scale(1.1);
        }
        
        /* Roulette wheel with conic gradient */
        .roulette-container {
            width: 350px;
            height: 350px;
            margin: 0 auto 24px;
            position: relative;
        }
        
        .roulette-wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                from 0deg,
                #e53e3e 0deg 9.72deg,
                #dd6b20 9.72deg 19.44deg,
                #d69e2e 19.44deg 29.16deg,
                #38a169 29.16deg 38.88deg,
                #319795 38.88deg 48.6deg,
                #3182ce 48.6deg 58.32deg,
                #805ad5 58.32deg 68.04deg,
                #d53f8c 68.04deg 77.76deg,
                #e53e3e 77.76deg 87.48deg,
                #dd6b20 87.48deg 97.2deg,
                #d69e2e 97.2deg 106.92deg,
                #38a169 106.92deg 116.64deg,
                #319795 116.64deg 126.36deg,
                #3182ce 126.36deg 136.08deg,
                #805ad5 136.08deg 145.8deg,
                #d53f8c 145.8deg 155.52deg,
                #e53e3e 155.52deg 165.24deg,
                #dd6b20 165.24deg 174.96deg,
                #d69e2e 174.96deg 184.68deg,
                #38a169 184.68deg 194.4deg,
                #319795 194.4deg 204.12deg,
                #3182ce 204.12deg 213.84deg,
                #805ad5 213.84deg 223.56deg,
                #d53f8c 223.56deg 233.28deg,
                #e53e3e 233.28deg 243deg,
                #dd6b20 243deg 252.72deg,
                #d69e2e 252.72deg 262.44deg,
                #38a169 262.44deg 272.16deg,
                #319795 272.16deg 281.88deg,
                #3182ce 281.88deg 291.6deg,
                #805ad5 291.6deg 301.32deg,
                #d53f8c 301.32deg 311.04deg,
                #e53e3e 311.04deg 320.76deg,
                #dd6b20 320.76deg 330.48deg,
                #d69e2e 330.48deg 340.2deg,
                #38a169 340.2deg 349.92deg,
                #319795 349.92deg 360deg
            );
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(0,0,0,0.6), inset 0 0 20px rgba(255,255,255,0.1);
            transition: transform 0.1s ease;
        }
        
        .roulette-pointer {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 40px;
            background: linear-gradient(to bottom, #f5576c, #e53e3e);
            clip-path: polygon(50% 100%, 0 0, 100% 0);
            z-index: 10;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        
        /* Card game advanced styles */
        .card-container {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 24px;
            perspective: 1000px;
        }
        
        .playing-card {
            width: 90px;
            height: 130px;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 6px;
            color: #333;
            font-weight: bold;
            box-shadow: 0 6px 12px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.5);
            position: relative;
            transition: transform 0.3s ease;
        }
        
        .playing-card:hover {
            transform: translateY(-2px);
        }
        
        .card-top, .card-bottom {
            font-size: 1.4rem;
            line-height: 1;
            position: relative;
            z-index: 2;
        }
        
        .card-center {
            font-size: 2.5rem;
            text-align: center;
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 2;
        }
        
        .card-red {
            color: #e53e3e;
        }
        
        .card-back {
            background: linear-gradient(135deg, #f5576c, #f093fb);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            box-shadow: 0 6px 12px rgba(245, 87, 108, 0.3);
        }
        
        .card-back::before {
            content: '';
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="rgba(255,255,255,0.1)"/></svg>');
            border-radius: 8px;
        }
        
        /* Number display with pulse */
        .number-display {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3.5rem;
            font-weight: bold;
            margin: 0 auto;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }
        
        .number-display.pulse {
            animation: pulse 1s ease-in-out;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(245, 87, 108, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(245, 87, 108, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(245, 87, 108, 0); }
        }
        
        /* Color options with selection effects */
        .color-option {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 6px;
            border: 4px solid transparent;
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        
        .color-option::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }
        
        .color-option:hover::before {
            width: 100%;
            height: 100%;
        }
        
        .color-option.selected {
            border-color: #f5576c;
            transform: scale(1.15);
            box-shadow: 0 0 20px rgba(245, 87, 108, 0.5);
        }
        
        .color-option.selected::before {
            width: 40px;
            height: 40px;
        }
        
        /* Promo code input styles */
        .promo-input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .promo-input:focus {
            outline: none;
            border-color: #f5576c;
            box-shadow: 0 0 10px rgba(245, 87, 108, 0.3);
        }
        
        /* Leaderboard table styles */
        .leaderboard {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            overflow: hidden;
        }
        
        .leaderboard th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            padding: 16px;
            text-align: left;
        }
        
        .leaderboard td {
            padding: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: background 0.3s ease;
        }
        
        .leaderboard tr:hover td {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .rank-gold { color: #ffd700; }
        .rank-silver { color: #c0c0c0; }
        .rank-bronze { color: #cd7f32; }
        
        /* Chat modal styles */
        .chat-container {
            height: 400px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
            background: rgba(255, 255, 255, 0.02);
        }
        
        .chat-input {
            display: flex;
            padding: 16px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .chat-input input {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 12px;
            border-radius: 20px;
            margin-right: 12px;
        }
        
        .chat-input button {
            padding: 12px 20px;
            border-radius: 20px;
        }
        
        .message {
            margin-bottom: 12px;
            padding: 8px 12px;
            border-radius: 8px;
            max-width: 80%;
        }
        
        .message.user {
            background: linear-gradient(135deg, #f5576c, #f093fb);
            margin-left: auto;
            text-align: right;
        }
        
        .message.bot {
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* Notification toast styles */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            border-radius: 8px;
            color: white;
            z-index: 2000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast.success {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .toast.error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        .toast.info {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
        }
        
        /* Progress bar for bonuses */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #f5576c, #f093fb);
            transition: width 0.5s ease;
            border-radius: 4px;
        }
        
        /* VIP badge styles */
        .vip-badge {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #000;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            animation: vipGlow 2s ease-in-out infinite alternate;
        }
        
        @keyframes vipGlow {
            0% { box-shadow: 0 0 5px rgba(255, 215, 0, 0.5); }
            100% { box-shadow: 0 0 15px rgba(255, 215, 0, 0.8); }
        }
        
        /* Deposit/Withdraw form styles */
        .payment-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .payment-method {
            display: flex;
            align-items: center;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .payment-method:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .payment-method.selected {
            background: rgba(245, 87, 108, 0.2);
            border: 2px solid #f5576c;
        }
        
        .payment-icon {
            width: 40px;
            height: 40px;
            margin-right: 16px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* Admin panel styles */
        .admin-panel {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 12px;
            padding: 24px;
        }
        
        .admin-section {
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .admin-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .admin-table th,
        .admin-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .admin-table th {
            background: rgba(102, 126, 234, 0.2);
        }
        
        .admin-action {
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            margin: 2px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .admin-action.ban {
            background: #ef4444;
            color: white;
        }
        
        .admin-action.approve {
            background: #10b981;
            color: white;
        }
        
        .admin-action.edit {
            background: #3b82f6;
            color: white;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                padding: 0 16px;
            }
            
            .game-card {
                transform: none !important;
            }
            
            .slot-machine {
                gap: 8px;
            }
            
            .slot-reel {
                width: 70px;
                height: 100px;
            }
            
            .roulette-container {
                width: 250px;
                height: 250px;
            }
            
            .modal-content {
                width: 98%;
                padding: 20px;
            }
        }
        
        /* Scrollbar customization */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #f5576c, #667eea);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #e53e3e, #5a67d8);
        }
        
        /* Loading spinner enhancements */
        .loading-spinner {
            border: 4px solid rgba(255,255,255,0.1);
            border-top: 4px solid #f5576c;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Fade in animations for elements */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Additional game-specific styles for Mines */
        .mines-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 4px;
            max-width: 300px;
            margin: 0 auto;
        }
        
        .mine-tile {
            aspect-ratio: 1;
            background: linear-gradient(145deg, #4a5568, #2d3748);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .mine-tile:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        
        .mine-tile.revealed {
            background: linear-gradient(145deg, #f7fafc, #edf2f7);
            color: #333;
        }
        
        .mine-tile.bomb {
            background: linear-gradient(145deg, #ef4444, #dc2626);
            color: white;
            animation: explode 0.5s ease;
        }
        
        @keyframes explode {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        /* Plinko board styles */
        .plinko-board {
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 300px;
            position: relative;
            background: linear-gradient(180deg, #1a202c, #2d3748);
            border-radius: 12px;
            overflow: hidden;
        }
        
        .plinko-peg {
            width: 20px;
            height: 20px;
            background: #f5576c;
            border-radius: 50%;
            position: absolute;
            z-index: 1;
        }
        
        .plinko-ball {
            width: 16px;
            height: 16px;
            background: #ffd700;
            border-radius: 50%;
            position: absolute;
            z-index: 2;
            animation: plinkoFall 2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        @keyframes plinkoFall {
            0% { top: 0%; left: 50%; }
            100% { top: 100%; left: calc(50% + (var(--offset) * 100px)); }
        }
        
        /* Crash game graph styles */
        .crash-graph {
            height: 200px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }
        
        .crash-line {
            position: absolute;
            bottom: 0;
            width: 2px;
            background: #f5576c;
            transform-origin: bottom;
            transition: transform 0.1s ease;
        }
        
        .crash-multiplier {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.5rem;
            font-weight: bold;
            color: #f5576c;
        }
        
        /* Keno number grid */
        .keno-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 4px;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .keno-number {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .keno-number:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }
        
        .keno-number.selected {
            background: #f5576c;
            color: white;
        }
        
        .keno-number.drawn {
            background: #10b981;
            color: white;
            animation: kenoDraw 0.5s ease;
        }
        
        @keyframes kenoDraw {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        /* Bingo card styles */
        .bingo-card {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 4px;
            max-width: 300px;
            margin: 0 auto;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 12px;
            padding: 12px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
        }
        
        .bingo-cell {
            aspect-ratio: 1;
            background: white;
            border: 2px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            transition: all 0.2s ease;
        }
        
        .bingo-cell.marked {
            background: #f5576c;
            color: white;
            border-color: #f5576c;
        }
        
        .bingo-cell.free {
            background: #ffd700;
            color: #000;
            border-color: #ffd700;
        }
        
        /* Lotto ball animations */
        .lotto-ball {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #f5576c, #f093fb);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            margin: 4px;
            animation: lottoBounce 0.6s ease-in-out;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        
        @keyframes lottoBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        /* Wheel of Fortune styles */
        .wheel-container {
            width: 300px;
            height: 300px;
            margin: 0 auto;
            position: relative;
        }
        
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                red 0deg 45deg,
                green 45deg 90deg,
                blue 90deg 135deg,
                yellow 135deg 180deg,
                purple 180deg 225deg,
                orange 225deg 270deg,
                pink 270deg 315deg,
                cyan 315deg 360deg
            );
            position: relative;
            transition: transform 4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .wheel-pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 30px solid #f5576c;
        }
        
        /* Blackjack table styles */
        .blackjack-table {
            background: linear-gradient(135deg, #0f0f23, #1a1a2e);
            border-radius: 12px;
            padding: 20px;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .hand-container {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin: 16px 0;
        }
        
        .blackjack-card {
            width: 60px;
            height: 90px;
            background: white;
            border-radius: 8px;
            position: relative;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .dealer-hand {
            border-top: 3px solid #f5576c;
            padding-top: 10px;
        }
        
        /* Poker hand display */
        .poker-hand {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin: 16px 0;
        }
        
        .poker-card {
            width: 50px;
            height: 70px;
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border-radius: 6px;
            position: relative;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        /* Stats dashboard styles */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2));
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 12px;
            opacity: 0.8;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.7;
        }
        
        /* Bonus section styles */
        .bonus-section {
            background: linear-gradient(135deg, #10b981, #059669);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .bonus-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                rgba(255,255,255,0.05) 10px,
                rgba(255,255,255,0.05) 20px
            );
            animation: bonusShine 3s linear infinite;
        }
        
        @keyframes bonusShine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .bonus-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 12px;
            position: relative;
            z-index: 1;
        }
        
        .bonus-description {
            position: relative;
            z-index: 1;
            margin-bottom: 16px;
        }
        
        /* Affiliate link styles */
        .affiliate-link {
            display: inline-block;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 8px;
        }
        
        .affiliate-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3);
        }
        
        /* Footer styles */
        .footer {
            background: rgba(0, 0, 0, 0.5);
            padding: 40px 20px 20px;
            margin-top: 60px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .footer-section {
            margin-bottom: 32px;
        }
        
        .footer-section h3 {
            margin-bottom: 16px;
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .footer-link {
            display: block;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            margin-bottom: 8px;
            transition: color 0.3s ease;
        }
        
        .footer-link:hover {
            color: #f5576c;
        }
        
        .social-icons {
            display: flex;
            gap: 12px;
        }
        
        .social-icon {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .social-icon:hover {
            background: #f5576c;
            transform: translateY(-2px);
        }
        
        /* Responsive footer */
        @media (max-width: 768px) {
            .footer {
                padding: 20px 16px;
            }
            
            .footer-grid {
                grid-template-columns: 1fr;
                gap: 24px;
            }
        }
        
        /* Print styles - hide interactive elements */
        @media print {
            .modal, .nav, .footer {
                display: none !important;
            }
            
            body {
                background: white;
                color: black;
            }
        }
        
        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .glass-effect {
                border: 2px solid #fff;
                background: rgba(255, 255, 255, 0.2);
            }
            
            .btn-primary, .btn-secondary {
                border: 2px solid #fff;
            }
        }
        
        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* Dark mode is default, but ensure consistency */
        @media (prefers-color-scheme: light) {
            body {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: #1a202c;
            }
            
            .glass-effect {
                background: rgba(0, 0, 0, 0.05);
                border-color: rgba(0, 0, 0, 0.1);
            }
        }

        /* No scroll class */
        .no-scroll {
            overflow: hidden;
        }

        /* Shimmer animation */
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        .animate-shimmer {
            animation: shimmer 2s infinite;
        }

        /* Minesweeper specific */
        .mines-safe { background: linear-gradient(145deg, #10b981, #059669); color: white; }
        .mines-bomb { background: linear-gradient(145deg, #ef4444, #dc2626); color: white; animation: shake 0.5s; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

        /* Plinko specific */
        .plinko-slot { height: 40px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; border-top: 1px solid rgba(255,255,255,0.1); }

        /* Keno specific */
        .keno-hits { color: #10b981; font-weight: bold; }

        /* Bingo specific */
        .bingo-line { animation: bingoLine 0.5s ease; background: linear-gradient(90deg, #f5576c, #10b981); color: white; }
        @keyframes bingoLine { 0% { opacity: 0; } 100% { opacity: 1; } }

        /* Lotto specific */
        .lotto-drawn { animation: lottoDraw 1s ease-in-out; box-shadow: 0 0 20px #ffd700; }
        @keyframes lottoDraw { 0% { transform: scale(0); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }

        /* Wheel specific */
        .wheel-segment { position: absolute; width: 50%; height: 50%; transform-origin: 100% 100%; }

        /* Blackjack specific */
        .bj-hand { display: flex; gap: 5px; }
        .bj-card { transition: transform 0.3s; }
        .bj-bust { animation: bustShake 0.5s; }
        @keyframes bustShake { 0%, 100% { transform: rotate(0); } 25% { transform: rotate(-5deg); } 75% { transform: rotate(5deg); } }

        /* Poker specific */
        .poker-hand { gap: 10px; }
        .poker-win { animation: pokerGlow 1s infinite alternate; box-shadow: 0 0 10px #ffd700; }
        @keyframes pokerGlow { from { box-shadow: 0 0 10px #ffd700; } to { box-shadow: 0 0 20px #ffd700; } }

        /* Red/Black specific */
        .rb-card { width: 100px; height: 150px; margin: 10px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 3rem; transition: transform 0.5s; }
        .rb-red { background: linear-gradient(135deg, #ef4444, #f56565); color: white; }
        .rb-black { background: linear-gradient(135deg, #2d3748, #4a5568); color: white; }

        /* Suit specific */
        .suit-option { width: 80px; height: 80px; border-radius: 50%; margin: 10px; display: flex; align-items: center; justify-content: center; font-size: 2rem; transition: all 0.3s; }
        .suit-hearts { background: linear-gradient(135deg, #e53e3e, #f56565); color: white; }
        .suit-diamonds { background: linear-gradient(135deg, #dd6b20, #ed8936); color: white; }
        .suit-clubs { background: linear-gradient(135deg, #38a169, #48bb78); color: white; }
        .suit-spades { background: linear-gradient(135deg, #2f855a, #38a169); color: white; }

        /* Over/Under specific */
        .ou-bar { height: 20px; background: rgba(255,255,255,0.1); border-radius: 10px; overflow: hidden; margin: 10px 0; }
        .ou-fill { height: 100%; transition: width 1s ease; background: linear-gradient(90deg, #f5576c, #f093fb); }

        /* Range specific */
        .range-slider { width: 100%; height: 10px; border-radius: 5px; background: rgba(255,255,255,0.2); outline: none; }
        .range-thumb { width: 20px; height: 20px; border-radius: 50%; background: #f5576c; cursor: pointer; }

        /* Hi-Lo specific */
        .hilo-arrow { font-size: 4rem; transition: transform 0.5s; }
        .hilo-up { transform: rotate(180deg); color: #10b981; }
        .hilo-down { color: #ef4444; }

        /* Turbo Dice specific */
        .turbo-dice { animation: turboPulse 0.2s infinite; }
        @keyframes turboPulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }

        /* Fortune Wheel specific */
        .fortune-wheel { transition: transform 3s cubic-bezier(0.25, 0.46, 0.45, 0.94); }

        /* Jackpot specific */
        .jackpot-counter { font-size: 2rem; color: #ffd700; animation: jackpotBlink 1s infinite; }
        @keyframes jackpotBlink { 0%, 50% { opacity: 1; } 51%, 100% { opacity: 0.5; } }

        /* Baccarat specific */
        .bac-hand { display: flex; gap: 5px; justify-content: space-around; }
        .bac-player { border-left: 4px solid #3b82f6; }
        .bac-banker { border-left: 4px solid #ef4444; }

        /* Sic Bo specific */
        .sicbo-dice { display: flex; gap: 10px; justify-content: center; }
        .sicbo-die { width: 60px; height: 60px; background: white; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 2rem; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }

        /* Cards specific */
        .cards-guess { display: flex; gap: 20px; justify-content: center; }
        .card-guess { width: 80px; height: 120px; background: linear-gradient(135deg, #f5576c, #f093fb); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: white; transition: transform 0.5s; }

        /* Colorwheel specific */
        .colorwheel-canvas { width: 200px; height: 200px; border-radius: 50%; margin: 0 auto; }

        /* Mines, Plinko, etc. already defined */
    </style>
</head>
<body class="min-h-screen relative">
    <!-- Floating particles background -->
    <div class="fixed inset-0 pointer-events-none z-0">
        <canvas id="particles-canvas"></canvas>
    </div>

    <!-- Navigation Bar with enhanced features -->
    <nav class="glass-effect py-4 px-6 flex justify-between items-center fixed w-full top-0 z-50 shadow-lg">
        <div class="flex items-center space-x-4">
            <h1 class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-500 to-red-500">LuckyBet</h1>
            <div class="hidden md:block text-sm opacity-70">Premium Gambling</div>
        </div>
        <div class="hidden md:flex space-x-8">
            <a href="#home" class="nav-active py-2 relative group">
                Asosiy
                <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-400 to-pink-600 transition-all group-hover:w-full"></span>
            </a>
            <a href="#games" class="py-2 relative group hover:text-purple-300">
                O'yinlar
                <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-400 to-pink-600 transition-all group-hover:w-full"></span>
            </a>
            <a href="#promotions" class="py-2 relative group hover:text-purple-300">
                Aksiyalar
                <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-400 to-pink-600 transition-all group-hover:w-full"></span>
            </a>
            <a href="#leaderboard" class="py-2 relative group hover:text-purple-300">
                Reyting
                <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-400 to-pink-600 transition-all group-hover:w-full"></span>
            </a>
            <a href="#support" class="py-2 relative group hover:text-purple-300">
                Yordam
                <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-400 to-pink-600 transition-all group-hover:w-full"></span>
            </a>
            <a href="/profile" class="py-2 relative group hover:text-purple-300" id="profileLink">
                Profil
                <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-400 to-pink-600 transition-all group-hover:w-full"></span>
            </a>
            <a href="/admin" class="py-2 relative group hover:text-purple-300" id="adminLink" style="display: none;" onclick="openAdminPanel()">
                Admin
                <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-purple-400 to-pink-600 transition-all group-hover:w-full"></span>
            </a>
        </div>
        <div class="flex items-center space-x-4 relative">
            <!-- Notification bell -->
            <button id="notificationBell" class="relative p-2 rounded-full bg-purple-900 bg-opacity-30 hover:bg-opacity-50 transition-all">
                <i class="fas fa-bell text-lg"></i>
                <span id="notificationCount" class="absolute -top-1 -right-1 bg-red-500 text-xs rounded-full w-5 h-5 flex items-center justify-center" style="display: none;">0</span>
            </button>
            <!-- Balance display with VIP badge -->
            <div class="balance-card relative">
                <span class="vip-badge absolute -top-2 -right-2" id="vipBadge" style="display: none;">VIP</span>
                <div class="text-sm opacity-80">Balans</div>
                <div class="text-xl font-bold" id="userBalance">0.00 UZS</div>
                <div class="text-xs opacity-70">Demo: <span id="demoBalance">0.00 UZS</span></div>
            </div>
            <!-- User menu with avatar -->
            <div class="relative">
                <button id="userMenuButton" class="flex items-center space-x-3 bg-purple-900 bg-opacity-40 rounded-full py-3 px-4 hover:bg-opacity-60 transition-all">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center relative overflow-hidden">
                        <span class="text-white font-bold text-lg z-10" id="userInitials">U</span>
                        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12"></div>
                    </div>
                    <span class="hidden sm:inline font-medium" id="userName">Foydalanuvchi</span>
                    <i class="fas fa-chevron-down text-sm transition-transform"></i>
                </button>
                <div id="userMenu" class="absolute right-0 mt-3 w-56 glass-effect rounded-xl shadow-2xl hidden py-2 z-50">
                    <a href="/profile" class="flex items-center px-4 py-3 hover:bg-purple-800/50 rounded-t-lg transition-all" onclick="showSettings()">
                        <i class="fas fa-user w-5 mr-3"></i>
                        <span>Profil</span>
                    </a>
                    <a href="/history" class="flex items-center px-4 py-3 hover:bg-purple-800/50 transition-all" onclick="showFullHistoryModal()">
                        <i class="fas fa-history w-5 mr-3"></i>
                        <span>Tarix</span>
                    </a>
                    <a href="#settings" class="flex items-center px-4 py-3 hover:bg-purple-800/50 transition-all" onclick="showSettings()">
                        <i class="fas fa-cog w-5 mr-3"></i>
                        <span>Sozlamalar</span>
                    </a>
                    <div class="border-t border-white/10 my-1"></div>
                    <button id="logoutBtn" class="flex items-center w-full text-left px-4 py-3 hover:bg-red-500/20 rounded-b-lg transition-all">
                        <i class="fas fa-sign-out-alt w-5 mr-3"></i>
                        <span>Chiqish</span>
                    </button>
                </div>
            </div>
            <!-- Mobile menu button -->
            <button id="mobileMenuBtn" class="md:hidden p-2 rounded-lg bg-purple-900 bg-opacity-30 hover:bg-opacity-50">
                <i class="fas fa-bars text-xl"></i>
            </button>
        </div>
    </nav>

    <!-- Mobile menu overlay -->
    <div id="mobileMenu" class="fixed inset-0 bg-black/50 z-40 hidden md:hidden">
        <div class="bg-gradient-to-b from-black/90 to-transparent h-full w-80 absolute right-0 p-6">
            <button id="closeMobileMenu" class="float-right text-white text-2xl">&times;</button>
            <ul class="mt-12 space-y-4">
                <li><a href="#home" class="block py-2 text-lg nav-active">Asosiy</a></li>
                <li><a href="#games" class="block py-2 text-lg hover:text-purple-300">O'yinlar</a></li>
                <li><a href="#promotions" class="block py-2 text-lg hover:text-purple-300">Aksiyalar</a></li>
                <li><a href="#leaderboard" class="block py-2 text-lg hover:text-purple-300">Reyting</a></li>
                <li><a href="#support" class="block py-2 text-lg hover:text-purple-300">Yordam</a></li>
                <li><a href="#profile" class="block py-2 text-lg hover:text-purple-300" id="mobileProfileLink" onclick="showSettings()">Profil</a></li>
            </ul>
        </div>
    </div>

    <!-- Main Content Area -->
    <main class="container mx-auto px-4 py-20 pt-24 relative z-10">
        <!-- Hero Section with Welcome Message -->
        <section id="home" class="text-center mb-16 fade-in">
            <h2 class="text-5xl font-bold mb-6 bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent">
                Xush kelibsiz, <span id="welcomeName">Do'st!</span>
            </h2>
            <p class="text-xl opacity-80 mb-8 max-w-2xl mx-auto">
                LuckyBet da eng yaxshi gambling tajribasini boshlang! 50+ o'yin, tezkor to'lovlar va katta bonuslar sizni kutmoqda.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                <button class="btn-primary text-lg px-8 py-4" onclick="scrollToSection('games')">
                    <i class="fas fa-play mr-2"></i> O'yinlarni boshlash
                </button>
                <button class="btn-secondary text-lg px-8 py-4" onclick="showPromoModal()">
                    <i class="fas fa-gift mr-2"></i> Bonus olish
                </button>
            </div>
        </section>

        <!-- Stats Dashboard -->
        <section class="stats-grid mb-16">
            <div class="stat-card glass-effect">
                <div class="stat-icon"><i class="fas fa-trophy text-yellow-400"></i></div>
                <div class="stat-value text-2xl" id="totalGamesPlayed">0</div>
                <div class="stat-label">Jami o'yinlar</div>
            </div>
            <div class="stat-card glass-effect">
                <div class="stat-icon"><i class="fas fa-chart-line text-green-400"></i></div>
                <div class="stat-value text-2xl" id="totalWinnings">0 UZS</div>
                <div class="stat-label">Jami yutishlar</div>
            </div>
            <div class="stat-card glass-effect">
                <div class="stat-icon"><i class="fas fa-percentage text-blue-400"></i></div>
                <div class="stat-value text-2xl" id="winRate">0%</div>
                <div class="stat-label">Yutish foizi</div>
            </div>
            <div class="stat-card glass-effect">
                <div class="stat-icon"><i class="fas fa-clock text-purple-400"></i></div>
                <div class="stat-value text-2xl" id="totalTimePlayed">0 soat</div>
                <div class="stat-label">O'ynash vaqti</div>
            </div>
        </section>

        <!-- Balance and Quick Actions -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12">
            <div class="balance-card col-span-1 lg:col-span-2 p-8">
                <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6">
                    <div class="flex-1">
                        <div class="text-lg opacity-80 mb-2">Umumiy Balans</div>
                        <div class="text-4xl font-bold mb-2" id="totalBalance">0.00 UZS</div>
                        <div class="flex gap-4 text-sm opacity-70">
                            <span>Demo Balans: <span id="totalDemoBalance">0.00 UZS</span></span>
                            <span class="ml-4">VIP Darajasi: <span id="vipLevel" class="text-yellow-400 font-bold">Bronza</span></span>
                        </div>
                        <!-- Progress bar for VIP level -->
                        <div class="mt-4">
                            <div class="text-xs opacity-60 mb-1">VIP progress</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="vipProgress" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col sm:flex-row gap-4 w-full sm:w-auto">
                        <button class="btn-primary flex-1 sm:flex-none" onclick="showDepositModal()">
                            <i class="fas fa-plus mr-2"></i> Pul kiritish
                        </button>
                        <button class="btn-secondary flex-1 sm:flex-none" onclick="showWithdrawModal()">
                            <i class="fas fa-download mr-2"></i> Pul yechish
                        </button>
                        <button class="btn-secondary flex-1 sm:flex-none" onclick="showTransferModal()">
                            <i class="fas fa-exchange-alt mr-2"></i> O'tkazma
                        </button>
                    </div>
                </div>
            </div>
            <div class="glass-effect rounded-xl p-6 flex flex-col justify-center h-full">
                <h3 class="text-lg font-bold mb-6 text-center">Bugungi statistika</h3>
                <div class="space-y-4">
                    <div class="flex justify-between items-center">
                        <span class="opacity-80">Yutishlar</span>
                        <span class="text-green-400 font-bold text-xl" id="todayWinnings">+0.00 UZS</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="opacity-80">Yo'qotishlar</span>
                        <span class="text-red-400 font-bold text-xl" id="todayLosses">-0.00 UZS</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="opacity-80">Jami tikishlar</span>
                        <span class="text-blue-400 font-bold text-xl" id="todayBets">0 UZS</span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-2 mt-4">
                        <div class="bg-green-500 h-2 rounded-full transition-all" id="dailyProgress" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Promotions and Bonus Section -->
        <section id="promotions" class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center fade-in">Aksiyalar va Bonuslar</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                <div class="glass-effect rounded-xl p-6 text-center hover:scale-105 transition-transform">
                    <div class="text-4xl mb-4"><i class="fas fa-user-plus text-blue-400"></i></div>
                    <h3 class="text-xl font-bold mb-2">Yangi foydalanuvchi bonusi</h3>
                    <p class="opacity-70 mb-4">Birinchi depozitda 100% bonus + 50 FS</p>
                    <div class="progress-bar mb-4">
                        <div class="progress-fill bg-blue-500" style="width: 75%"></div>
                    </div>
                    <button class="btn-primary w-full" onclick="claimBonus('welcome')">Bonus olish</button>
                </div>
                <div class="glass-effect rounded-xl p-6 text-center hover:scale-105 transition-transform">
                    <div class="text-4xl mb-4"><i class="fas fa-gift text-green-400"></i></div>
                    <h3 class="text-xl font-bold mb-2">Kunlik reload bonus</h3>
                    <p class="opacity-70 mb-4">Har kuni 50% gacha bonus depozitda</p>
                    <div class="progress-bar mb-4">
                        <div class="progress-fill bg-green-500" style="width: 40%"></div>
                    </div>
                    <button class="btn-primary w-full" onclick="claimBonus('daily')">Faollashtirish</button>
                </div>
                <div class="glass-effect rounded-xl p-6 text-center hover:scale-105 transition-transform">
                    <div class="text-4xl mb-4"><i class="fas fa-trophy text-yellow-400"></i></div>
                    <h3 class="text-xl font-bold mb-2">VIP dasturi</h3>
                    <p class="opacity-70 mb-4">Katta tikishlar uchun maxsus bonuslar</p>
                    <div class="progress-bar mb-4">
                        <div class="progress-fill bg-yellow-500" style="width: 60%"></div>
                    </div>
                    <button class="btn-primary w-full" onclick="showVipModal()">VIP bo'lish</button>
                </div>
            </div>
            <!-- Promo Code Input -->
            <div class="glass-effect rounded-xl p-6 max-w-md mx-auto">
                <h3 class="text-xl font-bold mb-4 text-center">Promokod kiritish</h3>
                <div class="flex gap-3">
                    <input type="text" id="promoCodeInput" class="promo-input flex-1" placeholder="Promokod kiriting (masalan: LUCKY2025)" maxlength="20">
                    <button class="btn-primary px-6" onclick="applyPromoCode()">
                        <i class="fas fa-check mr-1"></i> Qo'llash
                    </button>
                </div>
                <div id="promoMessage" class="mt-3 text-center text-sm hidden"></div>
                <div class="mt-4 text-xs opacity-60 text-center">
                    Mashhur kodlar: <a href="#" class="text-purple-400 hover:underline" onclick="showPromoModal()">Kodni ko'rish</a>
                </div>
            </div>
        </section>

        <!-- Games Section with Categories -->
        <section id="games" class="mb-16">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8">
                <h2 class="text-3xl font-bold mb-4 sm:mb-0 fade-in">Mashhur O'yinlar</h2>
                <select id="gameCategory" class="bg-gray-800 text-white rounded-lg px-4 py-2 ml-auto sm:ml-0">
                    <option value="all">Barchasi</option>
                    <option value="classic">Klassik</option>
                    <option value="slots">Slotlar</option>
                    <option value="table">Stollar</option>
                    <option value="live">Jonli</option>
                    <option value="crash">Crash o'yinlari</option>
                </select>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6" id="gamesContainer">
                <!-- Games dynamically loaded here -->
            </div>
            <div class="text-center mt-8">
                <button class="btn-secondary px-8 py-3 text-lg" onclick="loadMoreGames()">
                    <i class="fas fa-plus mr-2"></i> Ko'proq o'yinlar
                </button>
            </div>
        </section>

        <!-- Leaderboard Section -->
        <section id="leaderboard" class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center fade-in">Reyting Jadvali</h2>
            <div class="glass-effect rounded-xl overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="leaderboard w-full">
                        <thead>
                            <tr>
                                <th class="py-4 px-6">O'rin</th>
                                <th class="py-4 px-6">Foydalanuvchi</th>
                                <th class="py-4 px-6">Yutishlar</th>
                                <th class="py-4 px-6">Daraja</th>
                                <th class="py-4 px-6">Onlayn</th>
                            </tr>
                        </thead>
                        <tbody id="leaderboardBody">
                            <!-- Dynamic leaderboard data -->
                            <tr class="text-center">
                                <td colspan="5" class="py-12 opacity-40">Reyting yuklanmoqda...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="text-center mt-6">
                <button class="btn-primary" onclick="refreshLeaderboard()">Yangilash</button>
            </div>
        </section>

        <!-- Recent Transactions and History -->
        <section id="history" class="mb-16">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold fade-in">Oxirgi O'tkazmalar</h2>
                <a href="#" class="text-purple-400 hover:text-purple-300 flex items-center" onclick="showFullHistoryModal()">
                    <span>Hammasini ko'rish</span>
                    <i class="fas fa-arrow-right ml-2"></i>
                </a>
            </div>
            <div class="glass-effect rounded-xl overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b border-gray-700/50">
                                <th class="py-4 px-6 text-left font-medium">Vaqt</th>
                                <th class="py-4 px-6 text-left font-medium">Turi</th>
                                <th class="py-4 px-6 text-left font-medium">Miqdori</th>
                                <th class="py-4 px-6 text-left font-medium">O'yin</th>
                                <th class="py-4 px-6 text-left font-medium">Holati</th>
                            </tr>
                        </thead>
                        <tbody id="transactionsTable">
                            <tr>
                                <td colspan="5" class="py-12 text-center text-gray-400">
                                    <i class="fas fa-clock text-2xl mb-2"></i>
                                    <p>O'tkazmalar yuklanmoqda...</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Support and Chat Section -->
        <section id="support" class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center fade-in">Yordam va Qo'llab-quvvatlash</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="glass-effect rounded-xl p-8 text-center">
                    <div class="text-5xl mb-6"><i class="fas fa-headset text-blue-400"></i></div>
                    <h3 class="text-xl font-bold mb-4">Jonli chat</h3>
                    <p class="opacity-70 mb-6">24/7 texnik yordam</p>
                    <button class="btn-primary" onclick="showChatModal()">Chatni boshlash</button>
                </div>
                <div class="glass-effect rounded-xl p-8 text-center">
                    <div class="text-5xl mb-6"><i class="fas fa-envelope text-green-400"></i></div>
                    <h3 class="text-xl font-bold mb-4">E-pochta</h3>
                    <p class="opacity-70 mb-6">support@luckybet.uz</p>
                    <a href="mailto:support@luckybet.uz" class="btn-secondary">Yozish</a>
                </div>
            </div>
            <div class="glass-effect rounded-xl p-6 mt-8">
                <h3 class="text-lg font-bold mb-4">Tez-tez so'raladigan savollar</h3>
                <div id="faqAccordion" class="space-y-2">
                    <!-- FAQ items will be loaded here -->
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 footer-grid">
                <div class="footer-section">
                    <h3>LuckyBet</h3>
                    <p class="opacity-60 mb-4">Eng yaxshi onlayn gambling platformasi. Xavfsiz, tez va qulay.</p>
                    <div class="social-icons">
                        <a href="#" class="social-icon" title="Telegram"><i class="fab fa-telegram"></i></a>
                        <a href="#" class="social-icon" title="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-icon" title="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-icon" title="YouTube"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>O'yinlar</h3>
                    <a href="#" class="footer-link">Slot Mashinalari</a>
                    <a href="#" class="footer-link">Karta O'yinlari</a>
                    <a href="#" class="footer-link">Ruletka</a>
                    <a href="#" class="footer-link">Crash O'yinlari</a>
                    <a href="#" class="footer-link">Jonli Kazino</a>
                </div>
                <div class="footer-section">
                    <h3>Aksiyalar</h3>
                    <a href="#" class="footer-link">Bonuslar</a>
                    <a href="#" class="footer-link">VIP Dasturi</a>
                    <a href="#" class="footer-link">Turnirlar</a>
                    <a href="#" class="footer-link">Affiliate</a>
                </div>
                <div class="footer-section">
                    <h3>Yordam</h3>
                    <a href="#" class="footer-link" onclick="showFAQ()">FAQ</a>
                    <a href="#" class="footer-link">Shartlar</a>
                    <a href="#" class="footer-link">Maxfiylik</a>
                    <a href="#" class="footer-link">Aloqa</a>
                </div>
            </div>
            <div class="border-t border-white/10 mt-8 pt-8 text-center opacity-50">
                <p>&copy; 2025 LuckyBet. Barcha huquqlar himoyalangan. Mas'uliyatli o'yin.</p>
            </div>
        </div>
    </footer>

    <!-- Game Modal - Enhanced -->
    <div id="gameModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-8 relative">
                <h3 id="gameTitle" class="text-2xl font-bold flex items-center">
                    <i class="fas fa-gamepad mr-3 text-purple-400"></i>
                    O'yin nomi
                </h3>
                <div class="flex items-center space-x-4">
                    <button id="minimizeGame" class="p-2 rounded-full bg-gray-800 hover:bg-gray-700 transition-all" title="Kichraytirish">
                        <i class="fas fa-minus text-sm"></i>
                    </button>
                    <button id="maximizeGame" class="p-2 rounded-full bg-gray-800 hover:bg-gray-700 transition-all hidden" title="Kengaytirish">
                        <i class="fas fa-expand text-sm"></i>
                    </button>
                    <button id="closeModal" class="p-3 rounded-full bg-gray-800 hover:bg-red-500 transition-all" onclick="closeModal('gameModal')">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            <div id="gameHeader" class="flex justify-between items-center mb-6 opacity-0 transition-all">
                <div class="flex space-x-4">
                    <button class="btn-secondary px-4 py-2" onclick="decreaseBet()">
                        <i class="fas fa-minus"></i>
                    </button>
                    <span class="text-lg font-bold bg-gray-800 px-4 py-2 rounded-lg" id="currentBet">10 UZS</span>
                    <button class="btn-secondary px-4 py-2" onclick="increaseBet()">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                <div class="flex space-x-4">
                    <button class="btn-secondary" onclick="showQuickBets()">
                        <i class="fas fa-list mr-1"></i> Tez tikishlar
                    </button>
                    <button class="btn-secondary" onclick="showAutoPlayOptions()">
                        <i class="fas fa-play-circle mr-1"></i> Avto o'ynash
                    </button>
                </div>
            </div>
            <div id="gameContent" class="mb-8 min-h-[300px]">
                <!-- Game content dynamically loaded -->
            </div>
            <div class="flex flex-col sm:flex-row justify-between items-center gap-4 pt-4 border-t border-gray-700">
                <div class="flex space-x-3 w-full sm:w-auto">
                    <button class="btn-secondary flex-1 sm:flex-none" onclick="showGameRules()">
                        <i class="fas fa-info-circle mr-2"></i> Qoidalar
                    </button>
                    <button class="btn-secondary flex-1 sm:flex-none" onclick="showGameStats()">
                        <i class="fas fa-chart-bar mr-2"></i> Statistika
                    </button>
                </div>
                <div class="flex space-x-3 w-full sm:w-auto justify-end">
                    <button class="btn-secondary flex-1 sm:flex-none" onclick="resetGame()">
                        <i class="fas fa-redo mr-2"></i> Qayta boshlash
                    </button>
                    <button class="btn-primary flex-1 sm:flex-none" id="playGameBtn" disabled onclick="playGame()">
                        <i class="fas fa-play mr-2"></i> O'ynash
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Deposit Modal -->
    <div id="depositModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">Pul Kiritish</h3>
                <button class="text-gray-400 hover:text-white" onclick="closeModal('depositModal')">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form class="payment-form" id="depositForm">
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Miqdor (UZS)</label>
                    <input type="number" id="depositAmount" class="w-full promo-input" min="10000" max="50000000" placeholder="10000 - 50,000,000 UZS" required>
                    <div class="text-xs opacity-60 mt-1">Bonus: <span id="depositBonus">0 UZS</span> (+<span id="depositBonusPercent">0</span>%)</div>
                </div>
                <div class="mb-6">
                    <label class="block text-sm font-medium mb-2">To'lov usuli</label>
                    <div class="space-y-2">
                        <div class="payment-method" data-method="card">
                            <div class="payment-icon"><i class="fas fa-credit-card"></i></div>
                            <div>Kredit/Karta (Uzcard, Humo)</div>
                        </div>
                        <div class="payment-method" data-method="click">
                            <div class="payment-icon"><i class="fas fa-mobile-alt"></i></div>
                            <div>Click / Payme</div>
                        </div>
                        <div class="payment-method" data-method="crypto">
                            <div class="payment-icon"><i class="fab fa-bitcoin"></i></div>
                            <div>Kriptovalyuta (USDT, BTC)</div>
                        </div>
                        <div class="payment-method" data-method="bank">
                            <div class="payment-icon"><i class="fas fa-university"></i></div>
                            <div>Bank o'tkazmasi</div>
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn-primary w-full">Kiritish</button>
            </form>
            <div class="mt-6 text-xs opacity-60 text-center">
                Xavfsiz to'lov tizimi. Hech qanday komissiya yo'q.
            </div>
        </div>
    </div>

    <!-- Withdraw Modal -->
    <div id="withdrawModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">Pul Yechish</h3>
                <button class="text-gray-400 hover:text-white" onclick="closeModal('withdrawModal')">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form class="payment-form" id="withdrawForm">
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Miqdor (UZS)</label>
                    <input type="number" id="withdrawAmount" class="w-full promo-input" min="50000" max="10000000" placeholder="50,000 - 10,000,000 UZS" required>
                    <div class="text-xs opacity-60 mt-1">Minimal: 50,000 UZS | Maksimal: 10,000,000 UZS</div>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">Hisob raqami</label>
                    <input type="text" id="withdrawAccount" class="w-full promo-input" placeholder="Hisob raqamingizni kiriting" required>
                </div>
                <div class="mb-6">
                    <label class="block text-sm font-medium mb-2">Yechib olish usuli</label>
                    <select id="withdrawMethod" class="w-full promo-input" required>
                        <option value="">Usul tanlang</option>
                        <option value="bank">Bank o'tkazmasi</option>
                        <option value="card">Karta</option>
                        <option value="crypto">Kripto</option>
                        <option value="ewallet">Elektron hamyon</option>
                    </select>
                </div>
                <button type="submit" class="btn-primary w-full" id="withdrawSubmit">Yechib olish</button>
            </form>
            <div class="mt-6 p-4 bg-yellow-500/20 border border-yellow-500/30 rounded-lg">
                <p class="text-sm text-yellow-300">Eslatma: Yechib olish 1-3 ish kuni ichida amalga oshiriladi. Komissiya 1%.</p>
            </div>
        </div>
    </div>

    <!-- Transfer Modal -->
    <div id="transferModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">Balans O'tkazmasi</h3>
                <button class="text-gray-400 hover:text-white" onclick="closeModal('transferModal')">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form class="payment-form" id="transferForm">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <div>
                        <label class="block text-sm font-medium mb-2">Joriy balansdan</label>
                        <select id="fromBalance" class="w-full promo-input">
                            <option value="real">Real balans</option>
                            <option value="demo">Demo balans</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Qabul qiluvchi</label>
                        <select id="toBalance" class="w-full promo-input">
                            <option value="demo">Demo balans</option>
                            <option value="real">Real balans</option>
                        </select>
                    </div>
                </div>
                <div class="mb-6">
                    <label class="block text-sm font-medium mb-2">Miqdor (UZS)</label>
                    <input type="number" id="transferAmount" class="w-full promo-input" min="1000" max="1000000" placeholder="1,000 - 1,000,000 UZS" required>
                </div>
                <button type="submit" class="btn-primary w-full">O'tkazish</button>
            </form>
            <div class="mt-4 text-xs opacity-60 text-center">
                O'tkazma bepul va darhol amalga oshiriladi.
            </div>
        </div>
    </div>

    <!-- Promo Code Modal -->
    <div id="promoModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">Bonus va Promokodlar</h3>
                <button class="text-gray-400 hover:text-white" onclick="closeModal('promoModal')">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="space-y-4">
                <div class="glass-effect p-4 rounded-lg">
                    <h4 class="font-bold mb-2">Mavjud promokodlar:</h4>
                    <ul id="promoList" class="text-sm space-y-1">
                        <li class="flex justify-between"><span>LUCKY2025</span><span class="text-green-400">100% bonus</span></li>
                        <li class="flex justify-between"><span>FREE50</span><span class="text-green-400">50 FS</span></li>
                        <li class="flex justify-between"><span>VIP100</span><span class="text-green-400">100 UZS bepul</span></li>
                        <!-- More codes can be added dynamically -->
                    </ul>
                </div>
                <div class="text-center">
                    <button class="btn-primary" onclick="generateRandomPromo()">Tasodifiy kod olish</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Modal -->
    <div id="chatModal" class="modal">
        <div class="modal-content max-w-2xl max-h-[80vh]">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold flex items-center">
                    <i class="fas fa-comments mr-2 text-blue-400"></i>
                    Jonli Chat - Operator
                </h3>
                <button class="text-gray-400 hover:text-white" onclick="closeModal('chatModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="chat-container border border-gray-600 rounded-lg mb-4">
                <div class="chat-messages" id="chatMessages">
                    <div class="message bot">
                        <strong>Bot:</strong> Salom! Qanday yordam bera olaman? O'yinlar, to'lovlar yoki bonuslar haqida savollaringiz bormi?
                    </div>
                </div>
                <div class="chat-input">
                    <input type="text" id="chatInput" class="flex-1" placeholder="Xabaringizni yozing...">
                    <button class="btn-primary" onclick="sendChatMessage()">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
            <div class="text-xs opacity-50 text-center">
                Chat 24/7 ishlaydi. Bot yoki operator javob beradi.
            </div>
        </div>
    </div>

    <!-- VIP Modal -->
    <div id="vipModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">VIP Dasturi</h3>
                <button class="text-gray-400 hover:text-white" onclick="closeModal('vipModal')">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="space-y-6">
                <div class="text-center">
                    <div class="text-6xl mb-4" id="vipIcon"></div>
                    <h4 class="text-xl font-bold mb-2" id="currentVipLevel">Bronza</h4>
                    <p class="opacity-70" id="vipDescription">Joriy darajangiz: Bronza (0-100,000 UZS tikish)</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="glass-effect p-4 rounded-lg">
                        <h5 class="font-bold mb-2">VIP Darajalari</h5>
                        <ul class="text-sm space-y-1">
                            <li><span class="rank-bronze"> Bronza:</span> 1% cashback</li>
                            <li><span class="rank-silver"> Kumush:</span> 2% cashback + 50 FS/oy</li>
                            <li><span class="rank-gold"> Oltin:</span> 5% cashback + VIP menejer</li>
                            <li><span class="text-purple-400"> Platin:</span> 10% cashback + Eksklyuziv bonuslar</li>
                        </ul>
                    </div>
                    <div class="glass-effect p-4 rounded-lg">
                        <h5 class="font-bold mb-2">Foydalar</h5>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between"><span>Kunlik bonus</span><span id="dailyBonus">+50 UZS</span></div>
                            <div class="flex justify-between"><span>Cashback foizi</span><span id="cashbackRate">1%</span></div>
                            <div class="flex justify-between"><span>Yechib olish limiti</span><span id="withdrawLimit">5,000,000 UZS/kun</span></div>
                        </div>
                    </div>
                </div>
                <div class="progress-bar mx-auto max-w-md">
                    <div class="progress-fill" id="vipLevelProgress" style="width: 25%"></div>
                </div>
                <div class="text-center">
                    <button class="btn-primary" onclick="upgradeVip()">VIP ga yangilash</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Full History Modal -->
    <div id="historyModal" class="modal">
        <div class="modal-content max-h-[80vh] overflow-hidden">
            <div class="flex justify-between items-center mb-6 sticky top-0 bg-gradient-to-r from-gray-900 to-black/50 z-10 pb-4">
                <h3 class="text-xl font-bold">To'liq Tarix</h3>
                <div class="flex space-x-2">
                    <button class="btn-secondary px-3 py-1 text-sm" onclick="filterHistory('all')"><i class="fas fa-list"></i> Barchasi</button>
                    <button class="btn-secondary px-3 py-1 text-sm" onclick="filterHistory('wins')"><i class="fas fa-trophy"></i> Yutishlar</button>
                    <button class="btn-secondary px-3 py-1 text-sm" onclick="filterHistory('losses')"><i class="fas fa-frown"></i> Yo'qotishlar</button>
                    <button class="text-gray-400 hover:text-white p-2" onclick="closeModal('historyModal')"><i class="fas fa-times"></i></button>
                </div>
            </div>
            <div class="overflow-y-auto max-h-[calc(80vh-120px)]" id="fullHistoryContent">
                <!-- Full history table or list -->
                <div class="p-6 text-center opacity-40">
                    <i class="fas fa-search text-3xl mb-4"></i>
                    <p>Tarix yuklanmoqda...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">Sozlamalar</h3>
                <button class="text-gray-400 hover:text-white" onclick="closeModal('settingsModal')">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <form class="space-y-6" id="settingsForm">
                <div>
                    <label class="block text-sm font-medium mb-2">Til</label>
                    <select id="languageSelect" class="w-full promo-input">
                        <option value="uz">O'zbek</option>
                        <option value="ru"></option>
                        <option value="en">English</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Valyuta</label>
                    <select id="currencySelect" class="w-full promo-input">
                        <option value="UZS">UZS</option>
                        <option value="USD">$ USD</option>
                        <option value="EUR"> EUR</option>
                    </select>
                </div>
                <div class="space-y-3">
                    <label class="flex items-center">
                        <input type="checkbox" class="mr-2" id="soundToggle"> Ovoz effektlari
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" class="mr-2" id="notificationsToggle"> Bildirishnomalar
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" class="mr-2" id="darkModeToggle" checked> Qorong'u rejim
                    </label>
                </div>
                <div class="space-y-3">
                    <label class="flex items-center">
                        <input type="checkbox" class="mr-2" id="responsibleGaming"> Mas'uliyatli o'yin (Kunlik limit)
                    </label>
                    <input type="number" id="dailyLimit" class="promo-input mt-1 w-full" placeholder="Kunlik limit (UZS)">
                </div>
                <button type="submit" class="btn-primary w-full">Saqlash</button>
            </form>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="toastContainer"></div>

    <!-- Admin Panel Modal (Hidden by default) -->
    <div id="adminModal" class="modal" style="display: none;">
        <div class="modal-content max-h-[90vh] overflow-hidden">
            <div class="flex justify-between items-center mb-6 sticky top-0 bg-gradient-to-r from-gray-900 to-black/50 z-10 pb-4">
                <h3 class="text-xl font-bold">Admin Paneli</h3>
                <button class="text-gray-400 hover:text-white p-2" onclick="closeModal('adminModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="overflow-y-auto max-h-[calc(90vh-100px)] p-4" id="adminContent">
                <div class="admin-panel">
                    <div class="admin-section">
                        <h4 class="font-bold mb-4">Foydalanuvchilar boshqaruvi</h4>
                        <div class="overflow-x-auto mb-6">
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Foydalanuvchi</th>
                                        <th>Balans</th>
                                        <th>Status</th>
                                        <th>Harakatlar</th>
                                    </tr>
                                </thead>
                                <tbody id="adminUsersTable">
                                    <tr>
                                        <td colspan="5" class="text-center py-8 opacity-40">Ma'lumotlar yuklanmoqda...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <button class="btn-primary" onclick="loadAdminUsers()">Yuklash</button>
                    </div>
                    <div class="admin-section">
                        <h4 class="font-bold mb-4">O'tkazmalar tasdiqlash</h4>
                        <div class="overflow-x-auto">
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Foydalanuvchi</th>
                                        <th>Miqdor</th>
                                        <th>Turi</th>
                                        <th>Status</th>
                                        <th>Harakatlar</th>
                                    </tr>
                                </thead>
                                <tbody id="adminTransactionsTable">
                                    <tr>
                                        <td colspan="6" class="text-center py-8 opacity-40">Pending o'tkazmalar yuklanmoqda...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <button class="btn-secondary mt-4" onclick="loadPendingTransactions()">Pending yuklash</button>
                    </div>
                    <div class="admin-section">
                        <h4 class="font-bold mb-4">Bonuslar boshqaruvi</h4>
                        <div class="space-y-4">
                            <div class="flex gap-4">
                                <input type="text" id="newPromoCode" class="promo-input flex-1" placeholder="Yangi promokod">
                                <input type="number" id="promoAmount" class="promo-input w-32" placeholder="Miqdor">
                                <select id="promoType" class="promo-input w-32">
                                    <option value="bonus">Bonus</option>
                                    <option value="freespins">FS</option>
                                    <option value="cashback">Cashback</option>
                                </select>
                                <button class="btn-primary" onclick="createPromo()">Yaratish</button>
                            </div>
                            <div class="overflow-x-auto">
                                <table class="admin-table">
                                    <thead>
                                        <tr>
                                            <th>Kod</th>
                                            <th>Miqdor</th>
                                            <th>Turi</th>
                                            <th>Foydalanuvchilar soni</th>
                                            <th>Harakatlar</th>
                                        </tr>
                                    </thead>
                                    <tbody id="adminPromosTable">
                                        <tr>
                                            <td colspan="5" class="text-center py-8 opacity-40">Promokodlar yuklanmoqda...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="admin-section">
                        <h4 class="font-bold mb-4">Statistika</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
                            <div class="stat-card text-center p-4">
                                <div class="text-2xl font-bold" id="adminTotalUsers">0</div>
                                <div class="text-sm opacity-60">Jami foydalanuvchilar</div>
                            </div>
                            <div class="stat-card text-center p-4">
                                <div class="text-2xl font-bold text-green-400" id="adminTotalDeposits">0 UZS</div>
                                <div class="text-sm opacity-60">Jami depozitlar</div>
                            </div>
                            <div class="stat-card text-center p-4">
                                <div class="text-2xl font-bold text-red-400" id="adminTotalWithdraws">0 UZS</div>
                                <div class="text-sm opacity-60">Jami yechib olishlar</div>
                            </div>
                            <div class="stat-card text-center p-4">
                                <div class="text-2xl font-bold text-blue-400" id="adminActiveGames">0</div>
                                <div class="text-sm opacity-60">Faol o'yinlar</div>
                            </div>
                        </div>
                        <button class="btn-secondary" onclick="loadAdminStats()">Statistikani yangilash</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Bets Modal -->
    <div id="quickBetsModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold">Tez Tikishlar</h3>
                <button class="text-gray-400 hover:text-white" onclick="closeModal('quickBetsModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="grid grid-cols-4 gap-2 text-center">
                <button class="p-3 rounded bg-gray-700 hover:bg-gray-600 transition-all" onclick="setQuickBet(10)">10 UZS</button>
                <button class="p-3 rounded bg-gray-700 hover:bg-gray-600 transition-all" onclick="setQuickBet(50)">50 UZS</button>
                <button class="p-3 rounded bg-gray-700 hover:bg-gray-600 transition-all" onclick="setQuickBet(100)">100 UZS</button>
                <button class="p-3 rounded bg-gray-700 hover:bg-gray-600 transition-all" onclick="setQuickBet(500)">500 UZS</button>
                <button class="p-3 rounded bg-gray-700 hover:bg-gray-600 transition-all" onclick="setQuickBet(1000)">1,000 UZS</button>
                <button class="p-3 rounded bg-gray-700 hover:bg-gray-600 transition-all" onclick="setQuickBet(5000)">5,000 UZS</button>
                <button class="p-3 rounded bg-gray-700 hover:bg-gray-600 transition-all" onclick="setQuickBet(10000)">10,000 UZS</button>
                <button class="p-3 rounded bg-gray-700 hover:bg-gray-600 transition-all" onclick="setQuickBet('max')">MAX</button>
            </div>
        </div>
    </div>

    <!-- Auto Play Modal -->
    <div id="autoPlayModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold">Avto O'ynash</h3>
                <button class="text-gray-400 hover:text-white" onclick="closeModal('autoPlayModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form class="space-y-4">
                <div>
                    <label class="block text-sm mb-2">O'yinlar soni</label>
                    <input type="number" id="autoRounds" class="w-full promo-input" min="1" max="1000" value="10">
                </div>
                <div>
                    <label class="block text-sm mb-2">Stop yutishda (UZS)</label>
                    <input type="number" id="stopWin" class="w-full promo-input" min="0" placeholder="0 = o'chirilgan">
                </div>
                <div>
                    <label class="block text-sm mb-2">Stop yo'qotishda (UZS)</label>
                    <input type="number" id="stopLoss" class="w-full promo-input" min="0" placeholder="0 = o'chirilgan">
                </div>
                <div class="grid grid-cols-2 gap-2">
                    <button type="button" class="btn-secondary py-2" onclick="startAutoPlay()">Boshlash</button>
                    <button type="button" class="btn-secondary py-2" onclick="stopAutoPlay()">To'xtatish</button>
                </div>
            </form>
            <div class="mt-4 p-3 bg-yellow-500/20 border border-yellow-500/30 rounded text-sm text-yellow-300">
                <p>Eslatma: Avto o'ynash mas'uliyat bilan boshqaring.</p>
            </div>
        </div>
    </div>

    <!-- Game Rules Modal -->
    <div id="rulesModal" class="modal">
        <div class="modal-content max-h-[80vh]">
            <div class="flex justify-between items-center mb-6 sticky top-0 bg-gradient-to-r from-gray-900 to-black/50 z-10 pb-4">
                <h3 class="text-xl font-bold" id="rulesTitle">O'yin Qoidalari</h3>
                <button class="text-gray-400 hover:text-white p-2" onclick="closeModal('rulesModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="overflow-y-auto max-h-[calc(80vh-80px)] p-4 prose prose-invert max-w-none" id="rulesContent">
                <div class="text-center opacity-40 py-12">
                    <i class="fas fa-info-circle text-4xl mb-4"></i>
                    <p>Qoidalar yuklanmoqda...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Stats Modal -->
    <div id="statsModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold">O'yin Statistika</h3>
                <button class="text-gray-400 hover:text-white" onclick="closeModal('statsModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="gameStatsContent" class="space-y-4 text-sm">
                <div class="opacity-40 text-center py-8">
                    <i class="fas fa-chart-bar text-3xl mb-4"></i>
                    <p>Statistika yuklanmoqda...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Dropdown -->
    <div id="notificationDropdown" class="absolute top-full right-0 mt-2 w-80 glass-effect rounded-xl shadow-2xl hidden z-50 py-2 max-h-96 overflow-y-auto">
        <div class="px-4 py-2 border-b border-white/10 font-bold">Bildirishnomalar (<span id="notifCount">0</span>)</div>
        <div id="notifList" class="space-y-2">
            <!-- Notifications loaded here -->
        </div>
        <div class="px-4 py-2 border-t border-white/10">
            <a href="#" class="text-purple-400 hover:text-purple-300 text-sm">Barchasini ko'rish</a>
        </div>
    </div>

    <!-- Particles Canvas Script -->
    <script>
        // Initialize particles background
        function initParticles() {
            const canvas = document.getElementById('particles-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const particles = [];
            for (let i = 0; i < 100; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    vx: (Math.random() - 0.5) * 0.5,
                    vy: (Math.random() - 0.5) * 0.5,
                    radius: Math.random() * 2 + 1,
                    opacity: Math.random() * 0.5 + 0.2
                });
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach(p => {
                    p.x += p.vx;
                    p.y += p.vy;
                    if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                    if (p.y < 0 || p.y > canvas.height) p.vy *= -1;

                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(245, 87, 108, ${p.opacity})`;
                    ctx.fill();
                });
                requestAnimationFrame(animate);
            }
            animate();

            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        }
    </script>

    <!-- Main JavaScript -->
    <script>
        // Global variables
        let currentUser = null;
        let currentGame = null;
        let currentChoice = null;
        let isAnimating = false;
        let autoPlayActive = false;
        let autoPlayRounds = 0;
        let currentBetAmount = 10;
        let notifications = [];
        let gameHistory = [];
        let adminMode = false;

        // Currency and language settings
        let currentCurrency = 'UZS';
        let currentLanguage = 'uz';

        // Sound effects (using Web Audio API)
        let audioContext = null;
        let sounds = {};

        // Initialize on DOM load
        document.addEventListener('DOMContentLoaded', function() {
            initParticles();
            initSounds();
            checkAuth();
            setupEventListeners();
            loadInitialData();
            startPeriodicUpdates();
            // Load FAQ
            loadFAQ();
        });

        // Authentication and user session management
        async function checkAuth() {
            const token = localStorage.getItem('token');
            if (!token) {
                // Redirect to login if no token
                window.location.href = '/register-login';
                return;
            }

            try {
                const response = await fetch('https://gambling-h78m.onrender.com/api/user/profile', {
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        currentUser = result.user;
                        // Initialize demo balance if not set
                        if (!currentUser.demoBalance) currentUser.demoBalance = 1000000; // Starting demo balance
                        updateUI();
                        loadGames();
                        loadRecentTransactions();
                        loadTodayStats();
                        loadLeaderboard();
                        loadNotifications();
                        checkVIPStatus();
                        if (currentUser.isAdmin) {
                            document.getElementById('adminLink').style.display = 'block';
                        }
                    } else {
                        throw new Error(result.error || 'Authentication failed');
                    }
                } else {
                    localStorage.removeItem('token');
                    window.location.href = '/register-login';
                }
            } catch (error) {
                console.error('Auth error:', error);
                localStorage.removeItem('token');
                window.location.href = '/register-login';
            }
        }

        // Update UI with user data
        function updateUI() {
            if (!currentUser) return;

            document.getElementById('userBalance').textContent = `${currentUser.balance.toLocaleString()} ${currentCurrency}`;
            document.getElementById('demoBalance').textContent = `${currentUser.demoBalance.toLocaleString()} ${currentCurrency}`;
            document.getElementById('totalBalance').textContent = `${currentUser.balance.toLocaleString()} ${currentCurrency}`;
            document.getElementById('totalDemoBalance').textContent = `${currentUser.demoBalance.toLocaleString()} ${currentCurrency}`;
            document.getElementById('userName').textContent = `${currentUser.firstName} ${currentUser.lastName}`;
            document.getElementById('welcomeName').textContent = currentUser.firstName;
            document.getElementById('userInitials').textContent = `${currentUser.firstName[0]}${currentUser.lastName[0]}`.toUpperCase();

            // Update VIP badge
            if (currentUser.vipLevel && currentUser.vipLevel > 0) {
                document.getElementById('vipBadge').style.display = 'block';
                document.getElementById('vipLevel').textContent = getVipName(currentUser.vipLevel);
            }

            // Update stats
            document.getElementById('totalGamesPlayed').textContent = currentUser.totalGames || 0;
            document.getElementById('totalWinnings').textContent = `${(currentUser.totalWinnings || 0).toLocaleString()} ${currentCurrency}`;
            document.getElementById('winRate').textContent = `${(currentUser.winRate || 0).toFixed(1)}%`;
            document.getElementById('totalTimePlayed').textContent = formatTime(currentUser.totalPlayTime || 0);

            // Update VIP progress
            const progress = currentUser.vipProgress || 0;
            document.getElementById('vipProgress').style.width = `${progress}%`;
            document.getElementById('vipLevelProgress').style.width = `${progress}%`;
        }

        // Get VIP level name
        function getVipName(level) {
            const levels = ['Bronza', 'Kumush', 'Oltin', 'Platin', 'Diamond'];
            return levels[level - 1] || 'Bronza';
        }

        // Format time in hours
        function formatTime(seconds) {
            const hours = Math.floor(seconds / 3600);
            return `${hours} soat`;
        }

        // Check VIP status
        function checkVIPStatus() {
            if (currentUser.totalBets >= 1000000) {
                currentUser.vipLevel = 4; // Diamond
            } else if (currentUser.totalBets >= 500000) {
                currentUser.vipLevel = 3; // Platin
            } else if (currentUser.totalBets >= 100000) {
                currentUser.vipLevel = 2; // Oltin
            } else if (currentUser.totalBets >= 10000) {
                currentUser.vipLevel = 1; // Kumush
            }
            updateUI();
        }

        // Setup event listeners
        function setupEventListeners() {
            // User menu toggle
            document.getElementById('userMenuButton').addEventListener('click', toggleUserMenu);
            document.getElementById('notificationBell').addEventListener('click', toggleNotifications);
            document.getElementById('mobileMenuBtn').addEventListener('click', toggleMobileMenu);
            document.getElementById('closeMobileMenu').addEventListener('click', closeMobileMenu);

            // Form submissions
            document.getElementById('depositForm').addEventListener('submit', handleDeposit);
            document.getElementById('withdrawForm').addEventListener('submit', handleWithdraw);
            document.getElementById('transferForm').addEventListener('submit', handleTransfer);
            document.getElementById('settingsForm').addEventListener('submit', handleSettings);

            // Modal close on outside click
            window.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                    document.body.classList.remove('no-scroll');
                }
            });

            // Language change
            document.getElementById('languageSelect').addEventListener('change', (e) => {
                currentLanguage = e.target.value;
                updateLanguage();
            });

            // Currency change
            document.getElementById('currencySelect').addEventListener('change', (e) => {
                currentCurrency = e.target.value;
                updateCurrency();
            });

            // Dark mode toggle
            document.getElementById('darkModeToggle').addEventListener('change', toggleDarkMode);

            // Game category filter
            document.getElementById('gameCategory').addEventListener('change', filterGamesByCategory);

            // Logout
            document.getElementById('logoutBtn').addEventListener('click', logout);

            // Deposit amount input
            document.getElementById('depositAmount').addEventListener('input', updateDepositBonus);

            // Chat input
            document.getElementById('chatInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendChatMessage();
            });
        }

        // Toggle user menu
        function toggleUserMenu() {
            const menu = document.getElementById('userMenu');
            menu.classList.toggle('hidden');
            const chevron = document.querySelector('#userMenuButton i');
            chevron.classList.toggle('fa-chevron-down');
            chevron.classList.toggle('fa-chevron-up');
        }

        // Toggle notifications
        function toggleNotifications() {
            const dropdown = document.getElementById('notificationDropdown');
            dropdown.classList.toggle('hidden');
        }

        // Toggle mobile menu
        function toggleMobileMenu() {
            document.getElementById('mobileMenu').classList.remove('hidden');
        }

        function closeMobileMenu() {
            document.getElementById('mobileMenu').classList.add('hidden');
        }

        // Scroll to section
        function scrollToSection(sectionId) {
            document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
        }

        // Load initial data
        async function loadInitialData() {
            // Load games, transactions, etc. already called in checkAuth
            await Promise.all([
                loadFAQ(),
                loadPromos(),
                loadLeaderboard()
            ]);
        }

        // Periodic updates every 30 seconds
        function startPeriodicUpdates() {
            setInterval(async () => {
                if (currentUser) {
                    await loadRecentTransactions();
                    await loadNotifications();
                    checkVIPStatus();
                }
            }, 30000);
        }

        // Initialize sounds
        function initSounds() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            // Simple beep sound for win
            sounds.win = () => playTone(800, 0.2);
            sounds.lose = () => playTone(400, 0.2);
            sounds.spin = () => playTone(600, 0.1, 0.5);
            sounds.select = () => playTone(1000, 0.1);
        }

        function playTone(frequency, duration, delay = 0) {
            if (!audioContext || !document.getElementById('soundToggle') || !document.getElementById('soundToggle').checked) return;
            setTimeout(() => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                oscillator.frequency.value = frequency;
                oscillator.type = 'sine';
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + duration);
            }, delay * 1000);
        }

        // Update language (simplified)
        function updateLanguage() {
            // This would typically update all text content
            // For now, just log
            console.log(`Language changed to: ${currentLanguage}`);
            showToast('Til o\'zgartirildi', 'success');
        }

        // Update currency
        function updateCurrency() {
            updateUI();
            showToast(`Valyuta: ${currentCurrency}`, 'info');
        }

        // Toggle dark mode
        function toggleDarkMode(e) {
            if (e.target.checked) {
                document.body.classList.add('dark');
            } else {
                document.body.classList.remove('dark');
            }
            localStorage.setItem('darkMode', e.target.checked);
        }

        // Logout function
        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('userPrefs');
            showToast('Muvaffaqiyatli chiqdingiz', 'info');
            setTimeout(() => window.location.href = '/register-login', 1500);
        }

        // Show toast notification
        function showToast(message, type = 'info', duration = 3000) {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type} show`;
            toast.innerHTML = `
                <div class="flex items-center">
                    <i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle'} mr-3"></i>
                    <span>${message}</span>
                </div>
            `;
            container.appendChild(toast);

            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, duration);

            // Add to notifications array
            notifications.unshift({
                id: Date.now(),
                message,
                type,
                timestamp: new Date().toLocaleTimeString(),
                read: false
            });
            updateNotificationCount();
        }

        // Update notification count
        function updateNotificationCount() {
            const count = notifications.filter(n => !n.read).length;
            const badge = document.getElementById('notificationCount');
            const total = document.getElementById('notifCount');
            badge.style.display = count > 0 ? 'flex' : 'none';
            badge.textContent = count;
            total.textContent = notifications.length;
        }

        // Load notifications
        async function loadNotifications() {
            // Simulate API call
            if (Math.random() > 0.8) {
                notifications.push({
                    id: Date.now(),
                    message: 'Yangi bonus mavjud! Promokodni tekshiring.',
                    type: 'info',
                    read: false,
                    timestamp: new Date().toLocaleTimeString()
                });
                showToast('Yangi bildirishnoma', 'info');
                updateNotificationCount();
            }
            renderNotifications();
        }

        // Render notifications dropdown
        function renderNotifications() {
            const list = document.getElementById('notifList');
            list.innerHTML = notifications.slice(0, 10).map(notif => `
                <div class="px-4 py-3 hover:bg-purple-800/30 border-b border-white/5 cursor-pointer transition-all ${!notif.read ? 'font-bold' : ''}" onclick="markNotificationRead(${notif.id})">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <div class="flex items-center mb-1">
                                <i class="fas ${notif.type === 'success' ? 'fa-check' : notif.type === 'error' ? 'fa-exclamation' : 'fa-info'} text-xs mr-2 text-${notif.type}"></i>
                                <span>${notif.message}</span>
                            </div>
                            <div class="text-xs opacity-50">${notif.timestamp}</div>
                        </div>
                        ${!notif.read ? '<div class="w-2 h-2 bg-blue-400 rounded-full ml-2"></div>' : ''}
                    </div>
                </div>
            `).join('') || '<div class="px-4 py-3 text-center opacity-40">Yangi bildirishnoma yo\'q</div>';
        }

        // Mark notification as read
        function markNotificationRead(id) {
            const notif = notifications.find(n => n.id === id);
            if (notif) notif.read = true;
            updateNotificationCount();
            renderNotifications();
        }

        // Load FAQ
        async function loadFAQ() {
            const faqData = [
                {
                    question: "Qanday qilib pul kiritish mumkin?",
                    answer: "Profil > Pul kiritish bo'limidan Uzcard, Click, Payme orqali osongina pul kiritishingiz mumkin. Minimal 10,000 UZS."
                },
                {
                    question: "Yechib olish qancha vaqt oladi?",
                    answer: "Bank o'tkazmalari 1-3 ish kuni, elektron hamyonlar 30 daqiqa ichida amalga oshiriladi."
                },
                {
                    question: "Bonuslarni qanday olish mumkin?",
                    answer: "Promokod kiritish orqali yoki depozit paytida avtomatik bonuslar faollashadi. Shartlarni o'qing."
                },
                {
                    question: "O'yinlar adolatlimi?",
                    answer: "Ha, barcha o'yinlar RNG (tasodifiy sonlar generator) asosida ishlaydi va sertifikatlangan."
                },
                {
                    question: "Mas'uliyatli o'yin nima?",
                    answer: "Kunlik limitlar, o'yin vaqti cheklovlari va yordam xizmatlari mavjud. Muammo bo'lsa, +998 90 123 45 67 ga qo'ng'iroq qiling."
                }
            ];

            const accordion = document.getElementById('faqAccordion');
            accordion.innerHTML = faqData.map((faq, index) => `
                <div class="faq-item border border-gray-600 rounded-lg overflow-hidden">
                    <button class="w-full text-left p-4 hover:bg-gray-700/50 transition-all" onclick="toggleFAQ(${index})">
                        <span class="font-medium mr-4">${faq.question}</span>
                        <i class="fas fa-chevron-down float-right transition-transform" id="faqIcon${index}"></i>
                    </button>
                    <div class="faq-answer p-4 bg-gray-800/30 hidden" id="faqAnswer${index}">
                        ${faq.answer}
                    </div>
                </div>
            `).join('');
        }

        // Toggle FAQ item
        function toggleFAQ(index) {
            const answer = document.getElementById(`faqAnswer${index}`);
            const icon = document.getElementById(`faqIcon${index}`);
            const isHidden = answer.classList.contains('hidden');
            
            // Close all others
            document.querySelectorAll('.faq-answer').forEach(el => el.classList.add('hidden'));
            document.querySelectorAll('.faq-item i').forEach(el => el.classList.remove('fa-chevron-up'));
            
            if (isHidden) {
                answer.classList.remove('hidden');
                icon.classList.add('fa-chevron-up');
                icon.classList.remove('fa-chevron-down');
            }
        }

        // Load promotions list
        async function loadPromos() {
            // Simulate API
            const promos = [
                { code: 'LUCKY2025', reward: '100% depozit bonus', uses: 1250, maxUses: 5000 },
                { code: 'FREE50', reward: '50 bepul spin', uses: 890, maxUses: 2000 },
                { code: 'VIP100', reward: '100 UZS bepul', uses: 340, maxUses: 1000 },
                { code: 'WEEKEND20', reward: '20% weekend bonus', uses: 210, maxUses: 1500 },
                { code: 'CRASHKING', reward: 'Crash o\'yinida 2x multiplikator', uses: 450, maxUses: 3000 }
            ];
            document.getElementById('promoList').innerHTML = promos.map(promo => `
                <li class="flex justify-between items-center py-2 border-b border-white/10 last:border-b-0">
                    <span class="font-mono">${promo.code}</span>
                    <div class="text-right">
                        <div class="text-sm">${promo.reward}</div>
                        <div class="text-xs opacity-50">${promo.uses}/${promo.maxUses}</div>
                    </div>
                </li>
            `).join('');
        }

        // Apply promo code
        async function applyPromoCode() {
            const code = document.getElementById('promoCodeInput').value.trim().toUpperCase();
            const messageEl = document.getElementById('promoMessage');

            if (!code) {
                messageEl.textContent = 'Promokod kiriting!';
                messageEl.className = 'text-red-400';
                messageEl.classList.remove('hidden');
                return;
            }

            try {
                const response = await fetch('https://gambling-h78m.onrender.com/api/promo/apply', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('token')}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ code })
                });

                const result = await response.json();

                if (result.success) {
                    messageEl.textContent = `Muvaffaqiyat! ${result.reward} qo'shildi.`;
                    messageEl.className = 'text-green-400';
                    document.getElementById('promoCodeInput').value = '';
                    currentUser.balance += result.amount || 0;
                    updateUI();
                    playSound('win');
                    showToast('Bonus qo\'shildi!', 'success');
                } else {
                    messageEl.textContent = result.error || 'Noto\'g\'ri kod';
                    messageEl.className = 'text-red-400';
                }
            } catch (error) {
                messageEl.textContent = 'Xatolik yuz berdi';
                messageEl.className = 'text-red-400';
            }
            messageEl.classList.remove('hidden');
        }

        // Generate random promo
        function generateRandomPromo() {
            const promos = ['LUCKY2025', 'FREE50', 'VIP100', 'WEEKEND20', 'CRASHKING'];
            const randomCode = promos[Math.floor(Math.random() * promos.length)];
            document.getElementById('promoCodeInput').value = randomCode;
            showToast(`Kod taklif etildi: ${randomCode}`, 'info');
        }

        // Claim bonus
        async function claimBonus(type) {
            try {
                const response = await fetch('https://gambling-h78m.onrender.com/api/bonus/claim', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('token')}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ type })
                });

                const result = await response.json();

                if (result.success) {
                    currentUser.balance += result.amount;
                    updateUI();
                    playSound('win');
                    showToast(`Bonus: ${result.amount} ${currentCurrency}`, 'success');
                } else {
                    showToast(result.error, 'error');
                }
            } catch (error) {
                showToast('Bonus olishda xatolik', 'error');
            }
        }

        // Load games with categories
        async function loadGames() {
            const games = [
                // Classic games
                { id: 'dice', name: 'Dice Roll', icon: 'dice', category: 'classic', rtp: 98.5, volatility: 'low' },
                { id: 'coin', name: 'Coin Flip', icon: 'coins', category: 'classic', rtp: 95, volatility: 'medium' },
                { id: 'roulette', name: 'Roulette', icon: 'sync-alt', category: 'table', rtp: 97.3, volatility: 'medium' },
                { id: 'cards', name: 'Card Guess', icon: 'cards', category: 'classic', rtp: 96, volatility: 'low' },
                { id: 'evenodd', name: 'Even/Odd', icon: 'balance-scale', category: 'classic', rtp: 98, volatility: 'low' },
                
                // Slots
                { id: 'slots', name: 'Fruit Slots', icon: 'slot-machine', category: 'slots', rtp: 96.2, volatility: 'high' },
                { id: 'wheel', name: 'Wheel of Fortune', icon: 'redo', category: 'slots', rtp: 94.5, volatility: 'high' },
                { id: 'colorwheel', name: 'Color Wheel', icon: 'palette', category: 'slots', rtp: 97, volatility: 'medium' },
                
                // Table games
                { id: 'blackjack', name: 'Blackjack', icon: 'user-friends', category: 'table', rtp: 99.5, volatility: 'low' },
                { id: 'poker', name: 'Video Poker', icon: 'gem', category: 'table', rtp: 98.8, volatility: 'medium' },
                
                // Crash and risk games
                { id: 'crash', name: 'Crash', icon: 'car-crash', category: 'crash', rtp: 99, volatility: 'high' },
                { id: 'mines', name: 'Minesweeper', icon: 'bomb', category: 'crash', rtp: 98, volatility: 'high' },
                { id: 'plinko', name: 'Plinko', icon: 'arrow-down', category: 'crash', rtp: 99.2, volatility: 'medium' },
                
                // Lottery
                { id: 'keno', name: 'Keno', icon: 'list-ol', category: 'lottery', rtp: 95, volatility: 'high' },
                { id: 'bingo', name: 'Bingo', icon: 'check-square', category: 'lottery', rtp: 96.5, volatility: 'medium' },
                { id: 'lotto', name: 'Lotto 6/49', icon: 'ticket-alt', category: 'lottery', rtp: 50, volatility: 'very high' },
                
                // Additional games to reach 20+
                { id: 'redblack', name: 'Red/Black', icon: 'circle', category: 'classic', rtp: 97.5, volatility: 'low' },
                { id: 'suit', name: 'Suit Predict', icon: 'credit-card', category: 'classic', rtp: 98, volatility: 'low' },
                { id: 'overunder', name: 'Over/Under 50', icon: 'ruler-horizontal', category: 'classic', rtp: 96, volatility: 'medium' },
                { id: 'range', name: 'Number Range', icon: 'sliders-h', category: 'classic', rtp: 97, volatility: 'low' },
                { id: 'hi_lo', name: 'Hi-Lo', icon: 'sort', category: 'classic', rtp: 96.5, volatility: 'medium' },
                { id: 'turbo', name: 'Turbo Dice', icon: 'bolt', category: 'classic', rtp: 98.2, volatility: 'low' },
                { id: 'fortune', name: 'Fortune Wheel', icon: 'star', category: 'slots', rtp: 95.5, volatility: 'high' },
                { id: 'jackpot', name: 'Mega Jackpot', icon: 'crown', category: 'slots', rtp: 94, volatility: 'very high' },
                { id: 'baccarat', name: 'Baccarat', icon: 'dice-d20', category: 'table', rtp: 98.9, volatility: 'low' },
                { id: 'sicbo', name: 'Sic Bo', icon: 'dice', category: 'table', rtp: 97.2, volatility: 'medium' }
            ];

            const container = document.getElementById('gamesContainer');
            container.innerHTML = '';

            // Filter by category if needed
            const category = document.getElementById('gameCategory').value;
            const filteredGames = category === 'all' ? games : games.filter(g => g.category === category);

            filteredGames.forEach(game => {
                const card = document.createElement('div');
                card.className = 'game-card glass-effect cursor-pointer hover:shadow-2xl transition-all duration-300';
                card.innerHTML = `
                    <div class="h-48 bg-gradient-to-br from-${getColorForCategory(game.category)} flex items-center justify-center relative overflow-hidden">
                        <i class="fas fa-${game.icon} text-6xl text-white z-10"></i>
                        <div class="absolute inset-0 bg-black/20"></div>
                        <div class="absolute bottom-2 right-2 text-xs opacity-80 z-10">
                            <div>RTP: ${game.rtp}%</div>
                            <div>Vol: ${game.volatility}</div>
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="text-lg font-bold mb-3">${game.name}</h3>
                        <p class="text-sm opacity-60 mb-4">Klassik va zamonaviy o'yin mexanikasi</p>
                        <button class="btn-primary w-full py-3" onclick="openGameModal('${game.id}', '${game.name}', '${game.category}')">
                            <i class="fas fa-play mr-2"></i> O'ynash
                        </button>
                    </div>
                `;
                card.onclick = (e) => {
                    if (e.target.tagName !== 'BUTTON') {
                        openGameModal(game.id, game.name, game.category);
                    }
                };
                container.appendChild(card);
            });

            // Add loading animation to cards
            setTimeout(() => {
                container.querySelectorAll('.game-card').forEach((card, index) => {
                    card.style.animationDelay = `${index * 0.1}s`;
                    card.classList.add('fade-in');
                });
            }, 100);
        }

        // Get color for category
        function getColorForCategory(cat) {
            const colors = {
                classic: 'blue-500 to-purple-600',
                slots: 'yellow-500 to-orange-600',
                table: 'green-500 to-teal-600',
                crash: 'red-500 to-pink-600',
                lottery: 'purple-500 to-indigo-600'
            };
            return colors[cat] || 'gray-500 to-gray-700';
        }

        // Filter games by category
        function filterGamesByCategory() {
            loadGames(); // Reload with current filter
        }

        // Load more games (simulate)
        function loadMoreGames() {
            showToast('Barcha o\'yinlar yuklandi! Tez orada yangilar qo\'shiladi.', 'info');
        }

        // Open game modal with enhanced content
        function openGameModal(gameId, gameName, category) {
            currentGame = { id: gameId, name: gameName, category };
            currentChoice = null;
            currentBetAmount = 10;
            document.getElementById('gameTitle').textContent = gameName;
            document.getElementById('currentBet').textContent = `${currentBetAmount} ${currentCurrency}`;

            let gameHTML = getGameHTML(gameId, gameName, category);
            document.getElementById('gameContent').innerHTML = gameHTML;
            document.getElementById('gameHeader').classList.remove('opacity-0');
            document.getElementById('playGameBtn').disabled = true;

            // Setup game-specific listeners
            setupGameListeners(gameId);

            document.getElementById('gameModal').style.display = 'flex';
            document.body.classList.add('no-scroll');

            // Animate modal entrance
            const modalContent = document.querySelector('#gameModal .modal-content');
            modalContent.style.transform = 'scale(0.9)';
            modalContent.style.opacity = '0';
            setTimeout(() => {
                modalContent.style.transform = 'scale(1)';
                modalContent.style.opacity = '1';
                modalContent.style.transition = 'all 0.3s ease';
            }, 10);

            playSound('spin');
        }

        // Get HTML for specific game
        function getGameHTML(gameId, gameName, category) {
            const templates = {
                dice: `
                    <div class="text-center">
                        <div class="relative mb-8">
                            <div class="w-40 h-40 mx-auto bg-gradient-to-br from-blue-600 to-purple-700 rounded-2xl flex items-center justify-center text-6xl font-bold relative overflow-hidden" id="diceResult">
                                <i class="fas fa-dice-d20"></i>
                                <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -skew-x-12 transform -translate-x-full animate-shimmer"></div>
                            </div>
                            <div class="absolute inset-0 bg-gradient-radial from-white/20 to-transparent rounded-2xl blur opacity-0 group-hover:opacity-100 transition-opacity"></div>
                        </div>
                        <div class="flex justify-center space-x-6 mb-8">
                            <button class="choice-btn w-24 h-24 rounded-full flex flex-col items-center justify-center btn-secondary transition-all" data-choice="low" onclick="selectChoice(this, 'low')">
                                <div class="text-3xl mb-1">1-3</div>
                                <div class="text-xs opacity-60">Past</div>
                                <div class="w-full h-1 bg-gray-600 rounded-full mt-2"><div class="h-full bg-green-400 rounded-full w-1/2"></div></div>
                            </button>
                            <button class="choice-btn w-24 h-24 rounded-full flex flex-col items-center justify-center btn-secondary transition-all" data-choice="high" onclick="selectChoice(this, 'high')">
                                <div class="text-3xl mb-1">4-6</div>
                                <div class="text-xs opacity-60">Yuqori</div>
                                <div class="w-full h-1 bg-gray-600 rounded-full mt-2"><div class="h-full bg-red-400 rounded-full w-3/4"></div></div>
                            </button>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            ${!currentChoice ? '<div class="text-yellow-400 text-sm text-center py-4 bg-yellow-500/10 rounded-lg">Iltimos, tanlovingizni belgilang</div>' : ''}
                            <div class="text-xs opacity-50 text-center mb-4">Potensial yutish: <span id="potentialWin" class="font-bold text-green-400">19 ${currentCurrency}</span> (x1.9)</div>
                        </div>
                    </div>
                `,
                coin: `
                    <div class="text-center">
                        <div class="relative mb-8">
                            <div class="w-40 h-40 mx-auto bg-gradient-to-br from-yellow-500 to-orange-600 rounded-full flex items-center justify-center text-6xl font-bold relative overflow-hidden coin-result" id="coinResult">
                                <i class="fas fa-coins"></i>
                            </div>
                        </div>
                        <div class="flex justify-center space-x-6 mb-8">
                            <button class="choice-btn w-24 h-24 rounded-full flex flex-col items-center justify-center btn-secondary transition-all" data-choice="heads" onclick="selectChoice(this, 'heads')">
                                <div class="text-2xl mb-1"></div>
                                <div class="text-xs opacity-60">Bosh</div>
                            </button>
                            <button class="choice-btn w-24 h-24 rounded-full flex flex-col items-center justify-center btn-secondary transition-all" data-choice="tails" onclick="selectChoice(this, 'tails')">
                                <div class="text-2xl mb-1"></div>
                                <div class="text-xs opacity-60">Orqa</div>
                            </button>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            ${!currentChoice ? '<div class="text-yellow-400 text-sm text-center py-4 bg-yellow-500/10 rounded-lg">Iltimos, tanlovingizni belgilang</div>' : ''}
                            <div class="text-xs opacity-50 text-center mb-4">Potensial yutish: <span id="potentialWin" class="font-bold text-green-400">19 ${currentCurrency}</span> (x1.95)</div>
                        </div>
                    </div>
                `,
                roulette: `
                    <div class="text-center">
                        <div class="roulette-container mb-8">
                            <div class="roulette-wheel" id="rouletteWheel"></div>
                            <div class="roulette-pointer"></div>
                        </div>
                        <div class="flex justify-center space-x-4 mb-8">
                            <button class="choice-btn px-6 py-3 rounded-lg btn-secondary transition-all" data-choice="red" onclick="selectChoice(this, 'red')">
                                <div class="text-xl mb-1"></div>
                                <div>Qizil</div>
                            </button>
                            <button class="choice-btn px-6 py-3 rounded-lg btn-secondary transition-all" data-choice="black" onclick="selectChoice(this, 'black')">
                                <div class="text-xl mb-1"></div>
                                <div>Qora</div>
                            </button>
                            <button class="choice-btn px-6 py-3 rounded-lg btn-secondary transition-all" data-choice="green" onclick="selectChoice(this, 'green')">
                                <div class="text-xl mb-1"></div>
                                <div>Yashil (0)</div>
                            </button>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            ${!currentChoice ? '<div class="text-yellow-400 text-sm text-center py-4 bg-yellow-500/10 rounded-lg">Iltimos, tanlovingizni belgilang</div>' : ''}
                            <div class="text-xs opacity-50 text-center mb-4">Potensial yutish: <span id="potentialWin" class="font-bold text-green-400">19 ${currentCurrency}</span> (x2)</div>
                        </div>
                    </div>
                `,
                crash: `
                    <div class="text-center">
                        <div class="crash-graph mb-8 relative">
                            <canvas id="crashCanvas" width="400" height="200" class="w-full h-full"></canvas>
                            <div class="crash-multiplier" id="crashMultiplier">1.00x</div>
                        </div>
                        <div class="flex justify-center space-x-4 mb-8">
                            <button class="choice-btn px-6 py-3 rounded-lg btn-secondary transition-all" data-choice="cashout" onclick="selectChoice(this, 'cashout')">
                                <div class="text-xl mb-1"></div>
                                <div>Cashout</div>
                            </button>
                            <input type="number" id="crashTarget" class="w-20 p-2 bg-gray-800 rounded text-center" placeholder="2.0x" min="1.01" step="0.01" value="2.0">
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">Joriy multiplikator: <span id="potentialWin" class="font-bold text-green-400">2.0x</span></div>
                        </div>
                    </div>
                `,
                slots: `
                    <div class="text-center">
                        <div class="slot-machine mb-8">
                            <div class="slot-reel slot-spinning" id="slotReel1">
                                <div class="slot-symbol"></div>
                            </div>
                            <div class="slot-reel slot-spinning" id="slotReel2">
                                <div class="slot-symbol"></div>
                            </div>
                            <div class="slot-reel slot-spinning" id="slotReel3">
                                <div class="slot-symbol"></div>
                            </div>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">Uchta bir xil belgini moslashtiring! <span id="potentialWin" class="font-bold text-green-400">30 ${currentCurrency}</span> (x3)</div>
                        </div>
                    </div>
                `,
                blackjack: `
                    <div class="text-center">
                        <div class="blackjack-table mb-8">
                            <div class="dealer-hand mb-4">
                                <h4 class="text-lg font-bold mb-2">Diler qo'li</h4>
                                <div class="hand-container" id="dealerHand">
                                    <div class="blackjack-card card-back"><i class="fas fa-question"></i></div>
                                </div>
                            </div>
                            <div class="player-hand">
                                <h4 class="text-lg font-bold mb-2">Sizning qo'lingiz</h4>
                                <div class="hand-container" id="playerHand">
                                    <div class="blackjack-card card-back"></div>
                                </div>
                            </div>
                            <div class="flex justify-center space-x-4 mt-4">
                                <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="hit" onclick="selectChoice(this, 'hit')">Hit</button>
                                <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="stand" onclick="selectChoice(this, 'stand')">Stand</button>
                                <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="double" onclick="selectChoice(this, 'double')">Double</button>
                                <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="split" onclick="selectChoice(this, 'split')">Split</button>
                            </div>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">21 ga yaqinlash, dilerdan oshing! <span id="potentialWin" class="font-bold text-green-400">15 ${currentCurrency}</span> (x1.5)</div>
                        </div>
                    </div>
                `,
                poker: `
                    <div class="text-center">
                        <div class="poker-hand mb-8" id="pokerHand">
                            <div class="poker-card card-back"></div>
                            <div class="poker-card card-back"></div>
                            <div class="poker-card card-back"></div>
                            <div class="poker-card card-back"></div>
                            <div class="poker-card card-back"></div>
                        </div>
                        <div class="flex justify-center space-x-4 mb-8">
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="hold1" onclick="selectChoice(this, 'hold1')">Hold 1</button>
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="hold2" onclick="selectChoice(this, 'hold2')">Hold 2</button>
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="draw" onclick="selectChoice(this, 'draw')">Draw</button>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">Eng yaxshi qo'lni yig'ing! <span id="potentialWin" class="font-bold text-green-400">20 ${currentCurrency}</span> (x2)</div>
                        </div>
                    </div>
                `,
                mines: `
                    <div class="text-center">
                        <div class="mines-grid mb-8" id="minesGrid">
                            ${Array.from({length: 25}, (_, i) => `<div class="mine-tile" data-pos="${i}" onclick="revealMine(this)"></div>`).join('')}
                        </div>
                        <div class="flex justify-center space-x-4 mb-4">
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="start" onclick="selectChoice(this, 'start')">Boshlash</button>
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="cashout" onclick="selectChoice(this, 'cashout')">Cashout</button>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">Xavfsiz kataklarni toping! <span id="potentialWin" class="font-bold text-green-400">15 ${currentCurrency}</span> (x1.5)</div>
                        </div>
                    </div>
                `,
                plinko: `
                    <div class="text-center">
                        <div class="plinko-board mb-8" id="plinkoBoard">
                            <div class="plinko-peg" style="top: 10%; left: 20%;"></div>
                            <div class="plinko-peg" style="top: 20%; left: 40%;"></div>
                            <div class="plinko-slot" style="top: 90%; left: 0%;">1x</div>
                            <div class="plinko-slot" style="top: 90%; left: 25%;">2x</div>
                            <div class="plinko-slot" style="top: 90%; left: 50%;">5x</div>
                            <div class="plinko-slot" style="top: 90%; left: 75%;">2x</div>
                            <!-- More pegs and slots dynamically added in JS -->
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">To'pni tashlang va yutishni kuting! <span id="potentialWin" class="font-bold text-green-400">20 ${currentCurrency}</span> (x2)</div>
                        </div>
                    </div>
                `,
                keno: `
                    <div class="text-center">
                        <div class="keno-grid mb-8" id="kenoGrid">
                            ${Array.from({length: 80}, (_, i) => `<div class="keno-number" data-num="${i+1}" onclick="toggleKenoNumber(this)">${i+1}</div>`).join('')}
                        </div>
                        <div class="flex justify-center space-x-4 mb-4">
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="select5" onclick="selectChoice(this, 'select5')">5 raqam</button>
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="draw" onclick="selectChoice(this, 'draw')">Chizish</button>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">Mos raqamlarni toping! <span id="potentialWin" class="font-bold text-green-400">100 ${currentCurrency}</span> (x10)</div>
                        </div>
                    </div>
                `,
                bingo: `
                    <div class="text-center">
                        <div class="bingo-card mb-8" id="bingoCard">
                            ${Array.from({length: 25}, (_, i) => `<div class="bingo-cell" data-pos="${i}">${i === 12 ? 'FREE' : Math.floor(Math.random() * 75) + 1}</div>`).join('')}
                        </div>
                        <div class="flex justify-center space-x-4 mb-4">
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="draw" onclick="selectChoice(this, 'draw')">Chizish</button>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">Bingo qatorini to'ldiring! <span id="potentialWin" class="font-bold text-green-400">50 ${currentCurrency}</span> (x5)</div>
                        </div>
                    </div>
                `,
                lotto: `
                    <div class="text-center">
                        <div class="flex flex-wrap justify-center gap-2 mb-8" id="lottoBalls">
                            ${Array.from({length: 6}, () => `<div class="lotto-ball">${Math.floor(Math.random() * 49) + 1}</div>`).join('')}
                        </div>
                        <div class="flex justify-center space-x-4 mb-4">
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="generate" onclick="selectChoice(this, 'generate')">Yangi kombinatsiya</button>
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="draw" onclick="selectChoice(this, 'draw')">Chizish</button>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">6/49 moslik! <span id="potentialWin" class="font-bold text-green-400">1,000,000 ${currentCurrency}</span> (x100)</div>
                        </div>
                    </div>
                `,
                redblack: `
                    <div class="text-center">
                        <div class="flex justify-center space-x-6 mb-8">
                            <div class="rb-card rb-red" data-choice="red" onclick="selectChoice(this, 'red')"> Qizil</div>
                            <div class="rb-card rb-black" data-choice="black" onclick="selectChoice(this, 'black')"> Qora</div>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">Rangni taxmin qiling! <span id="potentialWin" class="font-bold text-green-400">19 ${currentCurrency}</span> (x1.95)</div>
                        </div>
                    </div>
                `,
                suit: `
                    <div class="text-center">
                        <div class="flex flex-wrap justify-center space-x-4 mb-8">
                            <div class="suit-option suit-hearts" data-choice="hearts" onclick="selectChoice(this, 'hearts')"></div>
                            <div class="suit-option suit-diamonds" data-choice="diamonds" onclick="selectChoice(this, 'diamonds')"></div>
                            <div class="suit-option suit-clubs" data-choice="clubs" onclick="selectChoice(this, 'clubs')"></div>
                            <div class="suit-option suit-spades" data-choice="spades" onclick="selectChoice(this, 'spades')"></div>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">Maqsadni taxmin qiling! <span id="potentialWin" class="font-bold text-green-400">40 ${currentCurrency}</span> (x4)</div>
                        </div>
                    </div>
                `,
                overunder: `
                    <div class="text-center">
                        <div class="ou-bar mb-8">
                            <div class="ou-fill" style="width: 50%;"></div>
                        </div>
                        <div class="flex justify-center space-x-6 mb-8">
                            <button class="choice-btn w-24 h-24 rounded-full flex flex-col items-center justify-center btn-secondary transition-all" data-choice="over" onclick="selectChoice(this, 'over')">
                                <div class="text-3xl mb-1">Over</div>
                                <div class="text-xs opacity-60">50+</div>
                            </button>
                            <button class="choice-btn w-24 h-24 rounded-full flex flex-col items-center justify-center btn-secondary transition-all" data-choice="under" onclick="selectChoice(this, 'under')">
                                <div class="text-3xl mb-1">Under</div>
                                <div class="text-xs opacity-60">50-</div>
                            </button>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">50 dan yuqori yoki past! <span id="potentialWin" class="font-bold text-green-400">19 ${currentCurrency}</span> (x1.95)</div>
                        </div>
                    </div>
                `,
                range: `
                    <div class="text-center">
                        <div class="number-display mb-8" id="rangeDisplay">42</div>
                        <input type="range" id="rangeSlider" class="range-slider mb-8" min="1" max="100" value="50" oninput="updateRangeDisplay(this.value)">
                        <div class="flex justify-center space-x-6 mb-8">
                            <button class="choice-btn w-24 h-24 rounded-full flex flex-col items-center justify-center btn-secondary transition-all" data-choice="in" onclick="selectChoice(this, 'in')">
                                <div class="text-3xl mb-1">In</div>
                                <div class="text-xs opacity-60">Ichida</div>
                            </button>
                            <button class="choice-btn w-24 h-24 rounded-full flex flex-col items-center justify-center btn-secondary transition-all" data-choice="out" onclick="selectChoice(this, 'out')">
                                <div class="text-3xl mb-1">Out</div>
                                <div class="text-xs opacity-60">Tashqarida</div>
                            </button>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">Oraliqni belgilang! <span id="potentialWin" class="font-bold text-green-400">20 ${currentCurrency}</span> (x2)</div>
                        </div>
                    </div>
                `,
                hi_lo: `
                    <div class="text-center">
                        <div class="number-display mb-8" id="hiloCurrent">42</div>
                        <div class="flex justify-center space-x-6 mb-8">
                            <button class="choice-btn w-24 h-24 rounded-full flex flex-col items-center justify-center btn-secondary transition-all" data-choice="hi" onclick="selectChoice(this, 'hi')">
                                <div class="text-3xl mb-1 hilo-arrow"></div>
                                <div class="text-xs opacity-60">Yuqori</div>
                            </button>
                            <button class="choice-btn w-24 h-24 rounded-full flex flex-col items-center justify-center btn-secondary transition-all" data-choice="lo" onclick="selectChoice(this, 'lo')">
                                <div class="text-3xl mb-1 hilo-arrow"></div>
                                <div class="text-xs opacity-60">Past</div>
                            </button>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">Keyingi sonni taxmin qiling! <span id="potentialWin" class="font-bold text-green-400">19 ${currentCurrency}</span> (x1.95)</div>
                        </div>
                    </div>
                `,
                turbo: `
                    <div class="text-center">
                        <div class="w-40 h-40 mx-auto bg-gradient-to-br from-green-600 to-emerald-700 rounded-2xl flex items-center justify-center text-6xl font-bold relative overflow-hidden turbo-dice" id="turboDice">
                            <i class="fas fa-dice-d20"></i>
                        </div>
                        <div class="flex justify-center space-x-6 mb-8">
                            <button class="choice-btn w-24 h-24 rounded-full flex flex-col items-center justify-center btn-secondary transition-all" data-choice="low" onclick="selectChoice(this, 'low')">
                                <div class="text-3xl mb-1">1-3</div>
                                <div class="text-xs opacity-60">Past</div>
                            </button>
                            <button class="choice-btn w-24 h-24 rounded-full flex flex-col items-center justify-center btn-secondary transition-all" data-choice="high" onclick="selectChoice(this, 'high')">
                                <div class="text-3xl mb-1">4-6</div>
                                <div class="text-xs opacity-60">Yuqori</div>
                            </button>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">Tez dice roll! <span id="potentialWin" class="font-bold text-green-400">19 ${currentCurrency}</span> (x1.9)</div>
                        </div>
                    </div>
                `,
                fortune: `
                    <div class="text-center">
                        <div class="wheel-container mb-8">
                            <div class="wheel fortune-wheel" id="fortuneWheel"></div>
                            <div class="wheel-pointer"></div>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">Omad g'ildiragi! <span id="potentialWin" class="font-bold text-green-400">50 ${currentCurrency}</span> (x5)</div>
                        </div>
                    </div>
                `,
                jackpot: `
                    <div class="text-center">
                        <div class="number-display jackpot-counter mb-8" id="jackpotCounter">1,234,567</div>
                        <div class="flex justify-center space-x-6 mb-8">
                            <button class="choice-btn w-24 h-24 rounded-full flex flex-col items-center justify-center btn-secondary transition-all" data-choice="spin" onclick="selectChoice(this, 'spin')">
                                <div class="text-3xl mb-1"></div>
                                <div class="text-xs opacity-60">Spin</div>
                            </button>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">Jekpotni urish! <span id="potentialWin" class="font-bold text-green-400">1,000,000 ${currentCurrency}</span> (x100)</div>
                        </div>
                    </div>
                `,
                baccarat: `
                    <div class="text-center">
                        <div class="bac-hand mb-8">
                            <div class="bac-player">
                                <h4 class="text-lg font-bold mb-2">Player</h4>
                                <div class="hand-container" id="playerBacHand">
                                    <div class="blackjack-card card-back"></div>
                                </div>
                            </div>
                            <div class="bac-banker">
                                <h4 class="text-lg font-bold mb-2">Banker</h4>
                                <div class="hand-container" id="bankerBacHand">
                                    <div class="blackjack-card card-back"></div>
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-center space-x-4 mb-4">
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="player" onclick="selectChoice(this, 'player')">Player</button>
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="banker" onclick="selectChoice(this, 'banker')">Banker</button>
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="tie" onclick="selectChoice(this, 'tie')">Tie</button>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">Player yoki Banker! <span id="potentialWin" class="font-bold text-green-400">19 ${currentCurrency}</span> (x1.95)</div>
                        </div>
                    </div>
                `,
                sicbo: `
                    <div class="text-center">
                        <div class="sicbo-dice mb-8" id="sicboDice">
                            <div class="sicbo-die"><i class="fas fa-dice-one"></i></div>
                            <div class="sicbo-die"><i class="fas fa-dice-two"></i></div>
                            <div class="sicbo-die"><i class="fas fa-dice-three"></i></div>
                        </div>
                        <div class="flex justify-center space-x-4 mb-4">
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="big" onclick="selectChoice(this, 'big')">Big (11-17)</button>
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="small" onclick="selectChoice(this, 'small')">Small (4-10)</button>
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="triple" onclick="selectChoice(this, 'triple')">Triple</button>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">Dice yig'indisini taxmin qiling! <span id="potentialWin" class="font-bold text-green-400">20 ${currentCurrency}</span> (x2)</div>
                        </div>
                    </div>
                `,
                cards: `
                    <div class="text-center">
                        <div class="cards-guess mb-8" id="cardsGuess">
                            <div class="card-guess">?</div>
                        </div>
                        <div class="flex justify-center space-x-4 mb-4">
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="higher" onclick="selectChoice(this, 'higher')">Higher</button>
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="lower" onclick="selectChoice(this, 'lower')">Lower</button>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">Keyingi kartani taxmin qiling! <span id="potentialWin" class="font-bold text-green-400">20 ${currentCurrency}</span> (x2)</div>
                        </div>
                    </div>
                `,
                colorwheel: `
                    <div class="text-center">
                        <canvas class="colorwheel-canvas mb-8" id="colorWheelCanvas" width="200" height="200"></canvas>
                        <div class="flex justify-center space-x-4 mb-4">
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="red" onclick="selectChoice(this, 'red')">Qizil</button>
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="blue" onclick="selectChoice(this, 'blue')">Ko'k</button>
                            <button class="choice-btn px-4 py-2 rounded btn-secondary" data-choice="green" onclick="selectChoice(this, 'green')">Yashil</button>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">Rangni tanlang! <span id="potentialWin" class="font-bold text-green-400">30 ${currentCurrency}</span> (x3)</div>
                        </div>
                    </div>
                `,
                evenodd: `
                    <div class="text-center">
                        <div class="number-display mb-8" id="evenoddDisplay">42</div>
                        <div class="flex justify-center space-x-6 mb-8">
                            <button class="choice-btn w-24 h-24 rounded-full flex flex-col items-center justify-center btn-secondary transition-all" data-choice="even" onclick="selectChoice(this, 'even')">
                                <div class="text-3xl mb-1">Even</div>
                                <div class="text-xs opacity-60">Juft</div>
                            </button>
                            <button class="choice-btn w-24 h-24 rounded-full flex flex-col items-center justify-center btn-secondary transition-all" data-choice="odd" onclick="selectChoice(this, 'odd')">
                                <div class="text-3xl mb-1">Odd</div>
                                <div class="text-xs opacity-60">Toq</div>
                            </button>
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-xs opacity-60 mb-1">Tikish</label>
                                    <div class="flex items-center space-x-2">
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(-10)">-</button>
                                        <span class="text-lg font-bold min-w-[60px] text-center" id="betDisplay">10 ${currentCurrency}</span>
                                        <button class="w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 transition-all" onclick="adjustBet(10)">+</button>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <label class="block text-xs opacity-60 mb-1">Demo rejim</label>
                                    <label class="flex items-center justify-end space-x-2 cursor-pointer">
                                        <input type="checkbox" id="demoMode" class="sr-only" checked>
                                        <div class="relative w-10 h-5 bg-green-600 rounded-full">
                                            <div class="absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform" id="demoToggle"></div>
                                        </div>
                                        <span class="text-xs">Demo</span>
                                    </label>
                                </div>
                            </div>
                            <div class="text-xs opacity-50 text-center mb-4">Juft yoki toq! <span id="potentialWin" class="font-bold text-green-400">19 ${currentCurrency}</span> (x1.95)</div>
                        </div>
                    </div>
                `
            };

            return templates[gameId] || templates.dice; // Fallback to dice if not found
        }

        // Update range display
        function updateRangeDisplay(value) {
            document.getElementById('rangeDisplay').textContent = value;
            updatePotentialWin();
        }

        // Toggle keno number
        function toggleKenoNumber(el) {
            el.classList.toggle('selected');
        }

        // Reveal mine
        function revealMine(el) {
            // Simulate reveal
            el.classList.add(Math.random() > 0.8 ? 'bomb' : 'revealed', Math.random() > 0.8 ? 'bomb' : 'mines-safe');
            el.innerHTML = Math.random() > 0.8 ? '' : '';
        }

        // Setup game specific listeners
        function setupGameListeners(gameId) {
            const demoToggle = document.getElementById('demoMode');
            if (demoToggle) {
                demoToggle.checked = true; // Default to demo
                demoToggle.addEventListener('change', function() {
                    updateMaxBet();
                    // Reset game for mode change
                    resetGame();
                });
            }

            // Choice buttons
            document.querySelectorAll('[data-choice]').forEach(btn => {
                btn.addEventListener('click', function() {
                    selectChoice(this, this.dataset.choice);
                });
            });

            // Bet adjustment
            const betDisplay = document.getElementById('betDisplay');
            if (betDisplay) {
                betDisplay.addEventListener('click', function() {
                    this.contentEditable = true;
                    this.focus();
                });
                betDisplay.addEventListener('blur', function() {
                    this.contentEditable = false;
                    const value = parseFloat(this.textContent.replace(/[^\d.]/g, ''));
                    if (!isNaN(value)) {
                        currentBetAmount = value;
                        updatePotentialWin();
                    }
                    this.textContent = `${currentBetAmount} ${currentCurrency}`;
                });
            }

            // For crash target
            const crashTarget = document.getElementById('crashTarget');
            if (crashTarget) {
                crashTarget.addEventListener('input', updatePotentialWin);
            }

            // For colorwheel canvas
            if (gameId === 'colorwheel') {
                const canvas = document.getElementById('colorWheelCanvas');
                const ctx = canvas.getContext('2d');
                // Simple color wheel draw
                const centerX = canvas.width / 2;
                const centerY = canvas.height / 2;
                const radius = 100;
                const colors = ['#ef4444', '#f59e0b', '#10b981', '#3b82f6'];
                for (let i = 0; i < colors.length; i++) {
                    ctx.beginPath();
                    ctx.arc(centerX, centerY, radius, (i * Math.PI * 2) / colors.length, ((i + 1) * Math.PI * 2) / colors.length);
                    ctx.fillStyle = colors[i];
                    ctx.fill();
                }
            }

            // For plinko, generate more pegs
            if (gameId === 'plinko') {
                const board = document.getElementById('plinkoBoard');
                for (let row = 0; row < 12; row++) {
                    for (let col = 0; col <= row; col++) {
                        const peg = document.createElement('div');
                        peg.className = 'plinko-peg';
                        peg.style.top = `${10 + row * 7}%`;
                        peg.style.left = `${20 + col * (60 / row)}%`;
                        board.appendChild(peg);
                    }
                }
            }

            // For lotto, generate initial balls
            if (gameId === 'lotto') {
                const balls = document.getElementById('lottoBalls');
                balls.innerHTML = Array.from({length: 6}, () => `<div class="lotto-ball">${Math.floor(Math.random() * 49) + 1}</div>`).join('');
            }

            // For mines, initialize grid
            if (gameId === 'mines') {
                // Bombs placed randomly in JS during play
            }

            // For keno, initial setup
            if (gameId === 'keno') {
                // Numbers already in HTML
            }

            // For bingo, initial card
            if (gameId === 'bingo') {
                // Numbers already in HTML
            }

            // For sicbo, initial dice
            if (gameId === 'sicbo') {
                const dice = document.querySelectorAll('.sicbo-die');
                dice.forEach(die => {
                    die.innerHTML = `<i class="fas fa-dice-${Math.floor(Math.random() * 6) + 1}"></i>`;
                });
            }
        }

        // Select choice for game
        function selectChoice(button, choice) {
            if (isAnimating) return;
            currentChoice = choice;
            
            // Update UI
            document.querySelectorAll('[data-choice]').forEach(btn => {
                btn.classList.remove('btn-primary', 'ring-2', 'ring-purple-400');
                btn.classList.add('btn-secondary');
            });
            button.classList.add('btn-primary', 'ring-2', 'ring-purple-400/50');
            button.classList.remove('btn-secondary');
            button.scrollIntoView({ behavior: 'smooth', block: 'nearest' });

            document.getElementById('playGameBtn').disabled = false;
            updatePotentialWin();

            playSound('select');
        }

        // Adjust bet amount
        function adjustBet(amount) {
            const isDemo = document.getElementById('demoMode')?.checked || false;
            const maxBalance = isDemo ? currentUser.demoBalance : currentUser.balance;
            currentBetAmount = Math.max(1, Math.min(maxBalance, currentBetAmount + amount));
            document.getElementById('betDisplay').textContent = `${currentBetAmount} ${currentCurrency}`;
            updatePotentialWin();
        }

        // Increase/Decrease bet
        function increaseBet() {
            adjustBet(10);
        }

        function decreaseBet() {
            adjustBet(-10);
        }

        // Set quick bet
        function setQuickBet(amount) {
            const isDemo = document.getElementById('demoMode')?.checked || false;
            const maxBalance = isDemo ? currentUser.demoBalance : currentUser.balance;
            if (amount === 'max') {
                currentBetAmount = maxBalance;
            } else {
                currentBetAmount = Math.min(amount, maxBalance);
            }
            document.getElementById('betDisplay').textContent = `${currentBetAmount} ${currentCurrency}`;
            updatePotentialWin();
            closeModal('quickBetsModal');
        }

        // Update potential win display
        function updatePotentialWin() {
            if (!currentChoice) return;
            const multiplier = getMultiplierForChoice(currentGame.id, currentChoice);
            const potential = currentBetAmount * multiplier;
            const potentialEl = document.getElementById('potentialWin');
            if (potentialEl) {
                potentialEl.innerHTML = `${potential.toLocaleString()} ${currentCurrency}`;
                const multiplierEl = potentialEl.parentNode.querySelector('span:last-child') || potentialEl;
                multiplierEl.innerHTML += ` (x${multiplier.toFixed(1)})`;
            }

            // For crash
            const crashTarget = document.getElementById('crashTarget');
            if (crashTarget && currentGame.id === 'crash') {
                const target = parseFloat(crashTarget.value) || 2;
                const crashPotential = currentBetAmount * (target - 1);
                potentialEl.innerHTML = `${crashPotential.toLocaleString()} ${currentCurrency}`;
            }
        }

        // Get multiplier for choice
        function getMultiplierForChoice(gameId, choice) {
            const multipliers = {
                dice: 1.9,
                coin: 1.95,
                roulette: choice === 'green' ? 14 : 2,
                slots: 3,
                redblack: 1.95,
                suit: 4,
                evenodd: 1.95,
                overunder: 1.95,
                range: 2,
                hi_lo: 1.95,
                turbo: 1.9,
                fortune: 5,
                jackpot: 100,
                blackjack: 1.5,
                poker: 2,
                mines: 1.5,
                plinko: 2,
                keno: 10,
                bingo: 5,
                lotto: 100,
                baccarat: choice === 'tie' ? 8 : 1.95,
                sicbo: choice === 'triple' ? 30 : 2,
                cards: 2,
                colorwheel: 3,
                wheel: 5
            };
            return multipliers[gameId] || 1.9;
        }

        // Update max bet based on demo/real
        function updateMaxBet() {
            const isDemo = document.getElementById('demoMode')?.checked || false;
            const max = isDemo ? currentUser.demoBalance : currentUser.balance;
            // Update input max if exists
            const betInput = document.querySelector('#gameContent input[type="number"]');
            if (betInput) betInput.max = max;
            adjustBet(0); // Re-adjust current bet
        }

        // Show quick bets modal
        function showQuickBets() {
            document.getElementById('quickBetsModal').style.display = 'flex';
        }

        // Show auto play options
        function showAutoPlayOptions() {
            document.getElementById('autoPlayModal').style.display = 'flex';
        }

        // Start auto play
        function startAutoPlay() {
            autoPlayRounds = parseInt(document.getElementById('autoRounds').value) || 10;
            const stopWin = parseFloat(document.getElementById('stopWin').value) || 0;
            const stopLoss = parseFloat(document.getElementById('stopLoss').value) || 0;

            if (autoPlayRounds <= 0) {
                showToast('Noto\'g\'ri o\'yinlar soni', 'error');
                return;
            }

            autoPlayActive = true;
            document.querySelector('#autoPlayModal button').textContent = 'To\'xtatish';
            playAutoRound();
        }

        // Stop auto play
        function stopAutoPlay() {
            autoPlayActive = false;
            showToast('Avto o\'ynash to\'xtatildi', 'info');
        }

        // Play auto round
        async function playAutoRound() {
            if (!autoPlayActive || autoPlayRounds <= 0) return;

            // Simulate playing a round
            await playGame(true); // true for auto
            autoPlayRounds--;

            // Check stop conditions
            const currentProfit = currentUser.balance - (currentUser.startBalance || currentUser.balance); // Assume start balance saved
            if ((stopWin > 0 && currentProfit >= stopWin) || (stopLoss > 0 && currentProfit <= -stopLoss)) {
                stopAutoPlay();
                return;
            }

            setTimeout(playAutoRound, 2000); // 2 second delay between rounds
        }

        // Show game rules
        function showGameRules() {
            const rules = getGameRules(currentGame.id);
            document.getElementById('rulesTitle').textContent = `${currentGame.name} Qoidalari`;
            document.getElementById('rulesContent').innerHTML = rules;
            document.getElementById('rulesModal').style.display = 'flex';
        }

        // Get rules for game
        function getGameRules(gameId) {
            const rules = {
                dice: `
                    <div class="prose">
                        <h3>Dice Roll Qoidalari</h3>
                        <p><strong>Maqsad:</strong> 1-6 oralig'idagi tasodifiy sonni taxmin qiling.</p>
                        <ul>
                            <li>Tanlov: 1-3 (Past) yoki 4-6 (Yuqori)</li>
                            <li>Koeffitsient: 1.9x (50% ehtimollik)</li>
                            <li>Minimal tikish: 1 ${currentCurrency}</li>
                            <li>Maksimal tikish: Balansingiz</li>
                        </ul>
                        <h4>Yutish shartlari:</h4>
                        <ul>
                            <li><strong>Past (1-3):</strong> Agar natija 1, 2 yoki 3 bo'lsa - yutdingiz</li>
                            <li><strong>Yuqori (4-6):</strong> Agar natija 4, 5 yoki 6 bo'lsa - yutdingiz</li>
                        </ul>
                        <blockquote class="bg-blue-500/20 p-4 rounded">
                            <p>RTP: 98.5% | Volatility: Past</p>
                        </blockquote>
                        <p><em>Eslatma: Barcha natijalar RNG orqali ta'minlanadi.</em></p>
                    </div>
                `,
                // Add rules for all other games similarly...
                coin: `
                    <div class="prose">
                        <h3>Coin Flip Qoidalari</h3>
                        <p><strong>Maqsad:</strong> Tanganing qaysi tomonini taxmin qiling.</p>
                        <ul>
                            <li>Tanlov: Bosh yoki Orqa</li>
                            <li>Koeffitsient: 1.95x</li>
                            <li>Minimal tikish: 1 ${currentCurrency}</li>
                        </ul>
                        <h4>Yutish shartlari:</h4>
                        <ul>
                            <li><strong>Bosh:</strong> Agar tanga bosh tomonini ko'rsatsa - yutdingiz</li>
                            <li><strong>Orqa:</strong> Agar tanga orqa tomonini ko'rsatsa - yutdingiz</li>
                        </ul>
                        <blockquote class="bg-blue-500/20 p-4 rounded">
                            <p>RTP: 95% | Volatility: O'rtacha</p>
                        </blockquote>
                    </div>
                `,
                roulette: `
                    <div class="prose">
                        <h3>Roulette Qoidalari</h3>
                        <p><strong>Maqsad:</strong> Ruletka g'ildiragining qaysi rangiga tushishini taxmin qiling.</p>
                        <ul>
                            <li>Tanlov: Qizil, Qora yoki Yashil (0)</li>
                            <li>Koeffitsient: Qizil/Qora - 2x, Yashil - 14x</li>
                        </ul>
                        <h4>Yutish shartlari:</h4>
                        <ul>
                            <li>Qizil/Qora: Tegishli rangga tushsa yutdingiz</li>
                            <li>Yashil: 0 ga tushsa yutdingiz</li>
                        </ul>
                        <blockquote class="bg-blue-500/20 p-4 rounded">
                            <p>RTP: 97.3% | Volatility: O'rtacha</p>
                        </blockquote>
                    </div>
                `,
                // ... (abbreviated for brevity, add similar for all)
                default: '<p class="text-center opacity-60 py-12">Qoidalar: Tanlovingizni qiling va o\'ynang! RTP 97%.</p>'
            };
            return rules[gameId] || rules.default;
        }

        // Show game stats
        function showGameStats() {
            const stats = {
                totalPlays: Math.floor(Math.random() * 10000) + 1000,
                totalWagered: (Math.random() * 10000000 + 1000000).toLocaleString(),
                totalPaid: (Math.random() * 12000000 + 1200000).toLocaleString(),
                rtp: 98.5,
                maxWin: '1,250,000 ${currentCurrency}'
            };

            document.getElementById('gameStatsContent').innerHTML = `
                <div class="grid grid-cols-2 gap-4 text-center p-4 glass-effect rounded-lg">
                    <div>
                        <div class="text-2xl font-bold">${stats.totalPlays.toLocaleString()}</div>
                        <div class="text-xs opacity-60">Jami o'yinlar</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold">${stats.totalWagered} ${currentCurrency}</div>
                        <div class="text-xs opacity-60">Jami tikishlar</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold">${stats.totalPaid} ${currentCurrency}</div>
                        <div class="text-xs opacity-60">Jami to'lovlar</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold">${stats.rtp}%</div>
                        <div class="text-xs opacity-60">RTP</div>
                    </div>
                </div>
                <div class="text-center text-sm opacity-60">
                    Eng katta yutish: <span class="font-bold text-green-400">${stats.maxWin}</span>
                </div>
            `;
            document.getElementById('statsModal').style.display = 'flex';
        }

        // Play game function
        async function playGame(isAuto = false) {
            if (isAnimating || !currentChoice) {
                showToast('Avval tanlovingizni belgilang!', 'error');
                return;
            }

            const betAmount = currentBetAmount;
            const isDemo = document.getElementById('demoMode')?.checked || false;

            if (betAmount > (isDemo ? currentUser.demoBalance : currentUser.balance)) {
                showToast('Tikish miqdori balansdan oshib ketdi!', 'error');
                return;
            }

            isAnimating = true;
            const playBtn = document.getElementById('playGameBtn');
            playBtn.disabled = true;
            playBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> O\'ynamoqda...';

            try {
                // Play animation
                await playAnimation(currentGame.id);

                // Simulate result if no API (for demo)
                let result = await simulateGameResult(currentGame.id, betAmount, currentChoice, isDemo);

                // Update result display
                showGameResult(result, isDemo);

                // Update user data
                const winAmount = result.winAmount || 0;
                const newBalance = isDemo ? currentUser.demoBalance + winAmount - betAmount : currentUser.balance + winAmount - betAmount;
                currentUser[isDemo ? 'demoBalance' : 'balance'] = newBalance;
                currentUser.totalGames += 1;
                currentUser.totalBets += betAmount;
                if (winAmount > 0) {
                    currentUser.totalWinnings += winAmount;
                    currentUser.winRate = ((currentUser.totalWinnings / currentUser.totalBets) * 100).toFixed(1);
                    playSound('win');
                    showToast(`Tabriklaymiz! ${winAmount.toLocaleString()} ${currentCurrency} yutdingiz! `, 'success');
                } else {
                    playSound('lose');
                    showToast('Afsus, bu safar omad kulmadi. Keyingi safar omad! ', 'info');
                }

                updateUI();
                loadRecentTransactions();
                loadTodayStats();
                gameHistory.unshift({
                    game: currentGame.name,
                    bet: betAmount,
                    win: winAmount > 0,
                    amount: winAmount || -betAmount,
                    timestamp: new Date().toLocaleString()
                });

                if (isAuto) {
                    // Continue auto play
                }
            } catch (error) {
                console.error('Play error:', error);
                showToast('Ulanish xatosi: ' + error.message, 'error');
            } finally {
                isAnimating = false;
                playBtn.disabled = false;
                playBtn.innerHTML = '<i class="fas fa-play mr-2"></i> O\'ynash';
                if (!isAuto) {
                    // Reset choice for next round
                    setTimeout(() => {
                        currentChoice = null;
                        document.querySelectorAll('[data-choice]').forEach(btn => {
                            btn.classList.remove('btn-primary', 'ring-2');
                            btn.classList.add('btn-secondary');
                        });
                        document.getElementById('playGameBtn').disabled = true;
                    }, 2000);
                }
            }
        }

        // Simulate game result (client-side RNG for demo)
        async function simulateGameResult(gameId, betAmount, choice, isDemo) {
            const winProb = isDemo ? 0.7 : 0.48; // Demo: 70% win, Real: 48% win (house edge)
            let result, winAmount = 0;
            let isWin = Math.random() < winProb;
            switch (gameId) {
                case 'dice':
                    result = Math.floor(Math.random() * 6) + 1;
                    isWin = isWin && ((choice === 'low' && result <= 3) || (choice === 'high' && result >= 4));
                    winAmount = isWin ? betAmount * 1.9 : 0;
                    break;
                case 'coin':
                    result = Math.random() < 0.5 ? 'heads' : 'tails';
                    isWin = isWin && result === choice;
                    winAmount = isWin ? betAmount * 1.95 : 0;
                    break;
                case 'roulette':
                    const num = Math.floor(Math.random() * 37);
                    const color = num === 0 ? 'green' : (num % 2 === 0 ? 'black' : 'red');
                    isWin = isWin && color === choice;
                    winAmount = isWin ? betAmount * (choice === 'green' ? 14 : 2) : 0;
                    result = { num, color };
                    break;
                case 'crash':
                    const multiplier = 1 + Math.exp(Math.random() * 3); // Exponential for realism
                    result = multiplier;
                    const target = parseFloat(document.getElementById('crashTarget').value) || 2;
                    isWin = isWin && multiplier >= target;
                    winAmount = isWin ? betAmount * (target - 1) : 0;
                    break;
                case 'slots':
                    const symbols = ['', '', '', '', '7'];
                    const reel1 = symbols[Math.floor(Math.random() * symbols.length)];
                    const reel2 = symbols[Math.floor(Math.random() * symbols.length)];
                    const reel3 = symbols[Math.floor(Math.random() * symbols.length)];
                    result = [reel1, reel2, reel3];
                    isWin = isWin && reel1 === reel2 && reel2 === reel3;
                    winAmount = isWin ? betAmount * 3 : 0;
                    break;
                case 'blackjack':
                    // Simplified: win if 17-21, bust if >21
                    const playerSum = Math.floor(Math.random() * 21) + 5; // 5-25
                    const dealerSum = Math.floor(Math.random() * 21) + 5;
                    isWin = isWin && playerSum <= 21 && (playerSum > dealerSum || dealerSum > 21);
                    winAmount = isWin ? betAmount * 1.5 : 0;
                    result = { player: playerSum, dealer: dealerSum };
                    break;
                case 'poker':
                    // Simplified: royal flush etc., but random
                    isWin = isWin;
                    winAmount = isWin ? betAmount * 2 : 0;
                    result = 'Pair'; // Placeholder
                    break;
                case 'mines':
                    // Win if safe tile revealed
                    isWin = isWin;
                    winAmount = isWin ? betAmount * 1.5 : 0;
                    result = isWin ? 'Safe' : 'Bomb';
                    break;
                case 'plinko':
                    const offset = (Math.random() - 0.5) * 2;
                    isWin = isWin;
                    winAmount = isWin ? betAmount * 2 : 0;
                    result = { offset };
                    break;
                case 'keno':
                    // Matches out of selected
                    const matches = Math.floor(Math.random() * 10);
                    isWin = isWin && matches >= 3;
                    winAmount = isWin ? betAmount * 10 : 0;
                    result = matches;
                    break;
                case 'bingo':
                    isWin = isWin;
                    winAmount = isWin ? betAmount * 5 : 0;
                    result = 'Bingo!';
                    break;
                case 'lotto':
                    const matchesLotto = Math.floor(Math.random() * 7);
                    isWin = isWin && matchesLotto === 6;
                    winAmount = isWin ? betAmount * 100 : 0;
                    result = matchesLotto;
                    break;
                case 'redblack':
                    result = Math.random() < 0.5 ? 'red' : 'black';
                    isWin = isWin && result === choice;
                    winAmount = isWin ? betAmount * 1.95 : 0;
                    break;
                case 'suit':
                    const suits = ['hearts', 'diamonds', 'clubs', 'spades'];
                    result = suits[Math.floor(Math.random() * 4)];
                    isWin = isWin && result === choice;
                    winAmount = isWin ? betAmount * 4 : 0;
                    break;
                case 'overunder':
                    result = Math.floor(Math.random() * 101);
                    isWin = isWin && ((choice === 'over' && result > 50) || (choice === 'under' && result < 50));
                    winAmount = isWin ? betAmount * 1.95 : 0;
                    break;
                case 'range':
                    const rangeValue = parseInt(document.getElementById('rangeSlider').value);
                    result = Math.floor(Math.random() * 100) + 1;
                    isWin = isWin && ((choice === 'in' && Math.abs(result - rangeValue) <= 5) || (choice === 'out' && Math.abs(result - rangeValue) > 5));
                    winAmount = isWin ? betAmount * 2 : 0;
                    break;
                case 'hi_lo':
                    const prev = parseInt(document.getElementById('hiloCurrent').textContent);
                    result = Math.floor(Math.random() * 100) + 1;
                    isWin = isWin && ((choice === 'hi' && result > prev) || (choice === 'lo' && result < prev));
                    winAmount = isWin ? betAmount * 1.95 : 0;
                    document.getElementById('hiloCurrent').textContent = result;
                    break;
                case 'turbo':
                    result = Math.floor(Math.random() * 6) + 1;
                    isWin = isWin && ((choice === 'low' && result <= 3) || (choice === 'high' && result >= 4));
                    winAmount = isWin ? betAmount * 1.9 : 0;
                    break;
                case 'fortune':
                    const segments = ['win1', 'win2', 'lose', 'bigwin'];
                    result = segments[Math.floor(Math.random() * segments.length)];
                    isWin = isWin && result !== 'lose';
                    winAmount = isWin ? betAmount * 5 : 0;
                    break;
                case 'jackpot':
                    isWin = isWin && Math.random() < 0.01; // Rare
                    winAmount = isWin ? 1000000 : 0;
                    break;
                case 'baccarat':
                    const playerScore = Math.floor(Math.random() * 10);
                    const bankerScore = Math.floor(Math.random() * 10);
                    isWin = isWin && ((choice === 'player' && playerScore > bankerScore) || (choice === 'banker' && bankerScore > playerScore) || (choice === 'tie' && playerScore === bankerScore));
                    winAmount = isWin ? (choice === 'tie' ? betAmount * 8 : betAmount * 1.95) : 0;
                    result = { player: playerScore, banker: bankerScore };
                    break;
                case 'sicbo':
                    const die1 = Math.floor(Math.random() * 6) + 1;
                    const die2 = Math.floor(Math.random() * 6) + 1;
                    const die3 = Math.floor(Math.random() * 6) + 1;
                    const total = die1 + die2 + die3;
                    isWin = isWin && ((choice === 'big' && total >= 11) || (choice === 'small' && total <= 10) || (choice === 'triple' && die1 === die2 && die2 === die3));
                    winAmount = isWin ? (choice === 'triple' ? betAmount * 30 : betAmount * 2) : 0;
                    result = [die1, die2, die3];
                    break;
                case 'cards':
                    const cardValue = Math.floor(Math.random() * 13) + 1;
                    result = cardValue;
                    isWin = isWin && ((choice === 'higher' && cardValue > 7) || (choice === 'lower' && cardValue < 7));
                    winAmount = isWin ? betAmount * 2 : 0;
                    break;
                case 'colorwheel':
                    const wheelColors = ['red', 'blue', 'green'];
                    result = wheelColors[Math.floor(Math.random() * 3)];
                    isWin = isWin && result === choice;
                    winAmount = isWin ? betAmount * 3 : 0;
                    break;
                case 'evenodd':
                    result = Math.floor(Math.random() * 100) + 1;
                    isWin = isWin && ((choice === 'even' && result % 2 === 0) || (choice === 'odd' && result % 2 === 1));
                    winAmount = isWin ? betAmount * 1.95 : 0;
                    document.getElementById('evenoddDisplay').textContent = result;
                    break;
                default:
                    isWin = isWin;
                    winAmount = isWin ? betAmount * getMultiplierForChoice(gameId, choice) : 0;
                    result = isWin ? 'Win' : 'Lose';
            }

            return {
                success: true,
                result,
                winAmount,
                newBalance: currentUser[isDemo ? 'demoBalance' : 'balance'] + winAmount - betAmount,
                newDemoBalance: currentUser.demoBalance
            };
        }

        // Show game result
        function showGameResult(result, isDemo) {
            const winClass = result.winAmount > 0 ? 'bg-green-500 pulse' : 'bg-red-500';
            // Game-specific result display
            if (currentGame.id === 'dice') {
                const diceEl = document.getElementById('diceResult');
                const diceIcon = `fa-dice-${result.result}`;
                diceEl.innerHTML = `<i class="fas ${diceIcon} text-6xl"></i>`;
                diceEl.className = `w-40 h-40 mx-auto bg-gradient-to-br from-blue-600 to-purple-700 rounded-2xl flex items-center justify-center text-6xl font-bold relative overflow-hidden ${winClass}`;
            } else if (currentGame.id === 'coin') {
                const coinEl = document.getElementById('coinResult');
                coinEl.innerHTML = `<div class="text-6xl coin-flipping">${result.result === 'heads' ? '' : ''}</div>`;
                coinEl.className = `w-40 h-40 mx-auto bg-gradient-to-br from-yellow-500 to-orange-600 rounded-full flex items-center justify-center text-6xl font-bold relative overflow-hidden ${winClass}`;
            } else if (currentGame.id === 'roulette') {
                const wheel = document.getElementById('rouletteWheel');
                const rotation = Math.random() * 360 + 1440; // 4 full spins
                wheel.style.transform = `rotate(${rotation}deg)`;
                setTimeout(() => {
                    const colorClass = result.color === 'red' ? 'border-red-500' : result.color === 'black' ? 'border-gray-800' : 'border-green-500';
                    wheel.classList.add(colorClass, winClass);
                }, 3000);
            } else if (currentGame.id === 'crash') {
                document.getElementById('crashMultiplier').textContent = `${result.result.toFixed(2)}x`;
                // Animate graph
                const canvas = document.getElementById('crashCanvas');
                const ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.beginPath();
                ctx.moveTo(0, canvas.height);
                ctx.lineTo(canvas.width, canvas.height - (result.result * 20));
                ctx.strokeStyle = result.winAmount > 0 ? '#10b981' : '#ef4444';
                ctx.lineWidth = 3;
                ctx.stroke();
            } else if (currentGame.id === 'slots') {
                document.querySelectorAll('.slot-reel').forEach((reel, index) => {
                    setTimeout(() => {
                        reel.innerHTML = `<div class="slot-symbol">${result.result[index]}</div>`;
                        reel.classList.remove('slot-spinning');
                    }, index * 500);
                });
                if (result.winAmount > 0) {
                    document.querySelector('.slot-machine').classList.add('color-flash');
                }
            } else if (currentGame.id === 'blackjack') {
                // Update hands
                const playerHand = document.getElementById('playerHand');
                playerHand.innerHTML = `<div class="blackjack-card">${result.result.player}</div>`;
                const dealerHand = document.getElementById('dealerHand');
                dealerHand.innerHTML = `<div class="blackjack-card">${result.result.dealer}</div>`;
                if (result.winAmount === 0 && result.result.player > 21) playerHand.classList.add('bj-bust');
            } else if (currentGame.id === 'poker') {
                const hand = document.getElementById('pokerHand');
                hand.innerHTML = Array.from({length: 5}, () => `<div class="poker-card">A</div>`).join('');
                if (result.winAmount > 0) hand.classList.add('poker-win');
            } else if (currentGame.id === 'mines') {
                document.querySelectorAll('.mine-tile').forEach(tile => {
                    if (Math.random() < 0.2) {
                        tile.classList.add('bomb');
                        tile.innerHTML = '';
                    } else {
                        tile.classList.add('revealed', 'mines-safe');
                        tile.innerHTML = '';
                    }
                });
            } else if (currentGame.id === 'plinko') {
                const ball = document.createElement('div');
                ball.className = 'plinko-ball';
                ball.style.setProperty('--offset', result.offset);
                document.getElementById('plinkoBoard').appendChild(ball);
                setTimeout(() => ball.remove(), 2000);
            } else if (currentGame.id === 'keno') {
                const drawn = Array.from({length: 20}, () => Math.floor(Math.random() * 80) + 1);
                drawn.forEach(num => {
                    const el = document.querySelector(`[data-num="${num}"]`);
                    if (el) el.classList.add('drawn');
                });
                document.getElementById('potentialWin').innerHTML = `<span class="keno-hits">${result.result} mos</span>`;
            } else if (currentGame.id === 'bingo') {
                const cells = document.querySelectorAll('.bingo-cell');
                cells.forEach(cell => {
                    if (Math.random() < 0.2) cell.classList.add('marked');
                });
                if (result.winAmount > 0) document.querySelector('.bingo-card').classList.add('bingo-line');
            } else if (currentGame.id === 'lotto') {
                const drawnBalls = Array.from({length: 6}, () => Math.floor(Math.random() * 49) + 1);
                document.getElementById('lottoBalls').innerHTML = drawnBalls.map(b => `<div class="lotto-ball lotto-drawn">${b}</div>`).join('');
            } else if (currentGame.id === 'redblack') {
                const card = document.querySelector('.rb-card');
                card.innerHTML = result === 'red' ? '' : '';
                card.classList.add(winClass);
            } else if (currentGame.id === 'suit') {
                const suits = { hearts: '', diamonds: '', clubs: '', spades: '' };
                document.querySelector('.suit-option').innerHTML = suits[result];
                document.querySelector(`[data-choice="${result}"]`).classList.add(winClass.replace('bg-', 'border-'));
            } else if (currentGame.id === 'overunder') {
                const fill = document.querySelector('.ou-fill');
                fill.style.width = `${result}%`;
                if (result.winAmount > 0) fill.classList.add('color-flash');
            } else if (currentGame.id === 'range') {
                document.getElementById('rangeDisplay').textContent = result;
                document.getElementById('rangeDisplay').classList.add(winClass);
            } else if (currentGame.id === 'hi_lo') {
                const arrow = document.querySelector('.hilo-arrow');
                arrow.classList.add(result > parseInt(document.getElementById('hiloCurrent').textContent) ? 'hilo-up' : 'hilo-down');
                if (result.winAmount > 0) arrow.classList.add('text-green-400');
            } else if (currentGame.id === 'turbo') {
                document.getElementById('turboDice').innerHTML = `<i class="fas fa-dice-${result}"></i>`;
                document.getElementById('turboDice').classList.add(winClass);
            } else if (currentGame.id === 'fortune') {
                const wheel = document.getElementById('fortuneWheel');
                const rotation = Math.random() * 360 + 1440;
                wheel.style.transform = `rotate(${rotation}deg)`;
                setTimeout(() => wheel.classList.add(winClass), 3000);
            } else if (currentGame.id === 'jackpot') {
                if (result.winAmount > 0) {
                    document.getElementById('jackpotCounter').textContent = 'JACKPOT!';
                    document.getElementById('jackpotCounter').classList.add('text-green-400');
                }
            } else if (currentGame.id === 'baccarat') {
                document.getElementById('playerBacHand').innerHTML = `<div class="blackjack-card">${result.result.player}</div>`;
                document.getElementById('bankerBacHand').innerHTML = `<div class="blackjack-card">${result.result.banker}</div>`;
            } else if (currentGame.id === 'sicbo') {
                document.querySelectorAll('.sicbo-die').forEach((die, i) => {
                    die.innerHTML = `<i class="fas fa-dice-${result.result[i]}"></i>`;
                });
            } else if (currentGame.id === 'cards') {
                document.getElementById('cardsGuess').innerHTML = ` ${result}`;
                document.getElementById('cardsGuess').classList.add(winClass);
            } else if (currentGame.id === 'colorwheel') {
                // Canvas update for result
                const canvas = document.getElementById('colorWheelCanvas');
                const ctx = canvas.getContext('2d');
                ctx.fillStyle = result;
                ctx.beginPath();
                ctx.arc(100, 100, 50, 0, Math.PI * 2);
                ctx.fill();
            } else if (currentGame.id === 'evenodd') {
                document.getElementById('evenoddDisplay').textContent = result;
                document.getElementById('evenoddDisplay').classList.add(winClass);
            }
            // Add more game-specific updates as needed
        }

        // Play animation for game
        async function playAnimation(gameId) {
            return new Promise(resolve => {
                const animations = {
                    dice: () => animateDice(resolve),
                    coin: () => animateCoin(resolve),
                    roulette: () => animateRoulette(resolve),
                    crash: () => animateCrash(resolve),
                    slots: () => animateSlots(resolve),
                    blackjack: () => animateBlackjack(resolve),
                    poker: () => animatePoker(resolve),
                    mines: () => animateMines(resolve),
                    plinko: () => animatePlinko(resolve),
                    keno: () => animateKeno(resolve),
                    bingo: () => animateBingo(resolve),
                    lotto: () => animateLotto(resolve),
                    redblack: () => animateRedBlack(resolve),
                    suit: () => animateSuit(resolve),
                    overunder: () => animateOverUnder(resolve),
                    range: () => animateRange(resolve),
                    hi_lo: () => animateHiLo(resolve),
                    turbo: () => animateTurbo(resolve),
                    fortune: () => animateFortune(resolve),
                    jackpot: () => animateJackpot(resolve),
                    baccarat: () => animateBaccarat(resolve),
                    sicbo: () => animateSicbo(resolve),
                    cards: () => animateCards(resolve),
                    colorwheel: () => animateColorWheel(resolve),
                    evenodd: () => animateEvenOdd(resolve),
                    default: () => setTimeout(resolve, 1500)
                };
                (animations[gameId] || animations.default)();
            });
        }

        // Define animations for each game
        function animateDice(resolve) {
            const el = document.getElementById('diceResult');
            el.classList.add('dice-rolling');
            playSound('spin');
            setTimeout(() => {
                el.classList.remove('dice-rolling');
                setTimeout(resolve, 500);
            }, 1500);
        }

        function animateCoin(resolve) {
            const el = document.getElementById('coinResult');
            el.classList.add('coin-flipping');
            playSound('spin');
            setTimeout(() => {
                el.classList.remove('coin-flipping');
                setTimeout(resolve, 500);
            }, 1200);
        }

        function animateRoulette(resolve) {
            const wheel = document.getElementById('rouletteWheel');
            wheel.classList.add('wheel-spinning');
            playSound('spin');
            setTimeout(() => {
                wheel.classList.remove('wheel-spinning');
                setTimeout(resolve, 500);
            }, 3000);
        }

        function animateCrash(resolve) {
            playSound('spin');
            setTimeout(resolve, 2000);
        }

        function animateSlots(resolve) {
            document.querySelectorAll('.slot-reel').forEach(reel => {
                reel.classList.add('slot-spinning');
            });
            playSound('spin');
            setTimeout(() => {
                document.querySelectorAll('.slot-reel').forEach(reel => {
                    reel.classList.remove('slot-spinning');
                });
                setTimeout(resolve, 500);
            }, 2000);
        }

        function animateBlackjack(resolve) {
            // Cards flip in
            playSound('spin');
            setTimeout(resolve, 1500);
        }

        function animatePoker(resolve) {
            // Cards deal
            const cards = document.querySelectorAll('.poker-card');
            cards.forEach((card, i) => {
                setTimeout(() => card.classList.add('card-flip'), i * 200);
            });
            playSound('spin');
            setTimeout(resolve, 1500);
        }

        function animateMines(resolve) {
            // Tiles shake
            document.querySelectorAll('.mine-tile').forEach(tile => tile.style.animation = 'shake 0.5s');
            playSound('spin');
            setTimeout(resolve, 1000);
        }

        function animatePlinko(resolve) {
            // Ball drop animation already in CSS
            playSound('spin');
            setTimeout(resolve, 2500);
        }

        function animateKeno(resolve) {
            // Numbers pop in
            playSound('spin');
            setTimeout(resolve, 1500);
        }

        function animateBingo(resolve) {
            // Cells mark with animation
            playSound('spin');
            setTimeout(resolve, 2000);
        }

        function animateLotto(resolve) {
            // Balls bounce in
            document.querySelectorAll('.lotto-ball').forEach(ball => ball.classList.add('lottoBounce'));
            playSound('spin');
            setTimeout(resolve, 1500);
        }

        function animateRedBlack(resolve) {
            // Card flip
            document.querySelectorAll('.rb-card').forEach(card => card.classList.add('card-flip'));
            playSound('spin');
            setTimeout(resolve, 800);
        }

        function animateSuit(resolve) {
            // Suit icons spin
            document.querySelectorAll('.suit-option').forEach(opt => opt.classList.add('number-spin'));
            playSound('spin');
            setTimeout(() => {
                document.querySelectorAll('.suit-option').forEach(opt => opt.classList.remove('number-spin'));
                resolve();
            }, 1200);
        }

        function animateOverUnder(resolve) {
            // Bar fill animation
            const fill = document.querySelector('.ou-fill');
            fill.style.width = '0%';
            fill.style.transition = 'width 1s ease';
            setTimeout(() => fill.style.width = '50%', 100);
            playSound('spin');
            setTimeout(resolve, 1200);
        }

        function animateRange(resolve) {
            // Slider animate
            const slider = document.getElementById('rangeSlider');
            slider.value = Math.random() * 100;
            updateRangeDisplay(slider.value);
            playSound('spin');
            setTimeout(resolve, 1000);
        }

        function animateHiLo(resolve) {
            // Arrow rotate
            const arrow = document.querySelector('.hilo-arrow');
            arrow.classList.add('number-spin');
            playSound('spin');
            setTimeout(() => {
                arrow.classList.remove('number-spin');
                resolve();
            }, 1200);
        }

        function animateTurbo(resolve) {
            const dice = document.getElementById('turboDice');
            dice.classList.add('turbo-pulse');
            playSound('spin');
            setTimeout(() => {
                dice.classList.remove('turbo-pulse');
                resolve();
            }, 800);
        }

        function animateFortune(resolve) {
            const wheel = document.getElementById('fortuneWheel');
            const rotation = Math.random() * 360 + 1440;
            wheel.style.transform = `rotate(${rotation}deg)`;
            playSound('spin');
            setTimeout(resolve, 3000);
        }

        function animateJackpot(resolve) {
            const counter = document.getElementById('jackpotCounter');
            let count = 1234567;
            const timer = setInterval(() => {
                count += Math.floor(Math.random() * 1000);
                counter.textContent = count.toLocaleString();
            }, 50);
            playSound('spin');
            setTimeout(() => {
                clearInterval(timer);
                resolve();
            }, 1500);
        }

        function animateBaccarat(resolve) {
            // Cards deal
            playSound('spin');
            setTimeout(resolve, 1500);
        }

        function animateSicbo(resolve) {
            document.querySelectorAll('.sicbo-die').forEach(die => die.classList.add('dice-rolling'));
            playSound('spin');
            setTimeout(() => {
                document.querySelectorAll('.sicbo-die').forEach(die => die.classList.remove('dice-rolling'));
                resolve();
            }, 1500);
        }

        function animateCards(resolve) {
            const guess = document.getElementById('cardsGuess');
            guess.classList.add('card-flip');
            playSound('spin');
            setTimeout(() => {
                guess.classList.remove('card-flip');
                resolve();
            }, 800);
        }

        function animateColorWheel(resolve) {
            // Canvas spin simulation
            playSound('spin');
            setTimeout(resolve, 2000);
        }

        function animateEvenOdd(resolve) {
            const display = document.getElementById('evenoddDisplay');
            display.classList.add('number-spin');
            playSound('spin');
            setTimeout(() => {
                display.classList.remove('number-spin');
                resolve();
            }, 1200);
        }

        // Reset game
        function resetGame() {
            if (currentGame && !isAnimating) {
                openGameModal(currentGame.id, currentGame.name, currentGame.category);
            }
        }

        // Close any modal
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            document.body.classList.remove('no-scroll');
        }

        // Load recent transactions
        async function loadRecentTransactions() {
            try {
                const response = await fetch('https://gambling-h78m.onrender.com/api/transactions/recent', {
                    headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }
                });
                const result = await response.json();

                if (result.success) {
                    const tbody = document.getElementById('transactionsTable');
                    if (result.transactions.length === 0) {
                        tbody.innerHTML = `
                            <tr><td colspan="5" class="py-12 text-center opacity-40">Hozircha o'tkazma yo'q</td></tr>
                        `;
                    } else {
                        tbody.innerHTML = result.transactions.slice(0, 10).map(tx => `
                            <tr class="hover:bg-gray-800/30 transition-colors">
                                <td class="py-4 px-6 text-sm">${new Date(tx.timestamp).toLocaleString()}</td>
                                <td class="py-4 px-6 text-sm capitalize">${tx.type.replace('_', ' ')}</td>
                                <td class="py-4 px-6 text-sm font-medium ${tx.amount > 0 ? 'text-green-400' : 'text-red-400'}">
                                    ${tx.amount > 0 ? '+' : ''}${tx.amount.toLocaleString()} ${currentCurrency}
                                </td>
                                <td class="py-4 px-6 text-sm">${tx.game || '-'}</td>
                                <td class="py-4 px-6">
                                    <span class="px-3 py-1 rounded-full text-xs ${
                                        tx.status === 'completed' ? 'bg-green-500/20 text-green-400' :
                                        tx.status === 'pending' ? 'bg-yellow-500/20 text-yellow-400' :
                                        'bg-red-500/20 text-red-400'
                                    }">${tx.status === 'completed' ? 'Tasdiqlandi' : tx.status === 'pending' ? 'Kutmoqda' : 'Rad etildi'}</span>
                                </td>
                            </tr>
                        `).join('');
                    }
                }
            } catch (error) {
                console.error('Transactions load error:', error);
            }
        }

        // Load today's stats
        async function loadTodayStats() {
            // Simulate or API call
            const todayWinnings = Math.floor(Math.random() * 50000);
            const todayLosses = Math.floor(Math.random() * 20000);
            const todayBets = todayWinnings + todayLosses;

            document.getElementById('todayWinnings').textContent = `+${todayWinnings.toLocaleString()} ${currentCurrency}`;
            document.getElementById('todayLosses').textContent = `-${todayLosses.toLocaleString()} ${currentCurrency}`;
            document.getElementById('todayBets').textContent = `${todayBets.toLocaleString()} ${currentCurrency}`;

            const progress = Math.min(100, (todayBets / 100000) * 100);
            document.getElementById('dailyProgress').style.width = `${progress}%`;
        }

        // Show deposit modal
        function showDepositModal() {
            document.getElementById('depositModal').style.display = 'flex';
            document.getElementById('depositAmount').focus();
            updateDepositBonus();
        }

        // Update deposit bonus calculation
        function updateDepositBonus() {
            const amount = parseFloat(document.getElementById('depositAmount').value) || 0;
            const bonusPercent = 100; // Welcome bonus
            const bonus = (amount * bonusPercent / 100);
            document.getElementById('depositBonus').textContent = `${bonus.toLocaleString()} ${currentCurrency}`;
            document.getElementById('depositBonusPercent').textContent = `${bonusPercent}%`;
        }

        // Handle deposit form
        async function handleDeposit(e) {
            e.preventDefault();
            const amount = parseFloat(document.getElementById('depositAmount').value);
            const method = document.querySelector('.payment-method.selected')?.dataset.method;

            if (!amount || !method) {
                showToast('Miqdor va usulni tanlang', 'error');
                return;
            }

            try {
                const response = await fetch('https://gambling-h78m.onrender.com/api/deposit', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('token')}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ amount, method })
                });

                const result = await response.json();

                if (result.success) {
                    currentUser.balance += amount;
                    updateUI();
                    showToast(`${amount.toLocaleString()} ${currentCurrency} qo'shildi!`, 'success');
                    closeModal('depositModal');
                    // Add bonus
                    claimBonus('deposit');
                } else {
                    showToast(result.error, 'error');
                }
            } catch (error) {
                showToast('Depozit xatosi', 'error');
            }
        }

        // Payment method selection
        document.addEventListener('click', (e) => {
            if (e.target.closest('.payment-method')) {
                document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));
                e.target.closest('.payment-method').classList.add('selected');
            }
        });

        // Handle withdraw form
        async function handleWithdraw(e) {
            e.preventDefault();
            const amount = parseFloat(document.getElementById('withdrawAmount').value);
            const method = document.getElementById('withdrawMethod').value;
            const account = document.getElementById('withdrawAccount').value;

            if (!amount || !method || !account) {
                showToast('Barcha maydonlarni to\'ldiring', 'error');
                return;
            }

            try {
                const response = await fetch('https://gambling-h78m.onrender.com/api/withdraw', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('token')}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ amount, method, account })
                });

                const result = await response.json();

                if (result.success) {
                    currentUser.balance -= amount;
                    updateUI();
                    showToast('Yechib olish so\'rovi yuborildi. 24 soat ichida tekshiriladi.', 'success');
                    closeModal('withdrawModal');
                } else {
                    showToast(result.error, 'error');
                }
            } catch (error) {
                showToast('Yechib olish xatosi', 'error');
            }
        }

        // Handle transfer form
        async function handleTransfer(e) {
            e.preventDefault();
            const from = document.getElementById('fromBalance').value;
            const to = document.getElementById('toBalance').value;
            const amount = parseFloat(document.getElementById('transferAmount').value);

            if (!amount || from === to) {
                showToast('Noto\'g\'ri ma\'lumotlar', 'error');
                return;
            }

            try {
                const response = await fetch('https://gambling-h78m.onrender.com/api/transfer', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('token')}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ from, to, amount })
                });

                const result = await response.json();

                if (result.success) {
                    showToast('Balans o\'tkazmasi muvaffaqiyatli!', 'success');
                    closeModal('transferModal');
                    updateUI();
                } else {
                    showToast(result.error, 'error');
                }
            } catch (error) {
                showToast('O\'tkazma xatosi', 'error');
            }
        }

        // Show promo modal
        function showPromoModal() {
            document.getElementById('promoModal').style.display = 'flex';
        }

        // Show chat modal
        function showChatModal() {
            document.getElementById('chatModal').style.display = 'flex';
            document.getElementById('chatInput').focus();
        }

        // Send chat message
        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;

            const messages = document.getElementById('chatMessages');
            const userMsg = document.createElement('div');
            userMsg.className = 'message user';
            userMsg.innerHTML = `<strong>Siz:</strong> ${message}`;
            messages.appendChild(userMsg);
            messages.scrollTop = messages.scrollHeight;

            input.value = '';
            // Simulate bot response
            setTimeout(() => {
                const botMsg = document.createElement('div');
                botMsg.className = 'message bot';
                botMsg.innerHTML = `<strong>Bot:</strong> Xabaringizni oldim! Tez orada operator javob beradi. Yana savol bormi?`;
                messages.appendChild(botMsg);
                messages.scrollTop = messages.scrollHeight;
            }, 1000);
        }

        // Show VIP modal
        function showVipModal() {
            document.getElementById('vipModal').style.display = 'flex';
        }

        // Upgrade VIP
        async function upgradeVip() {
            // API call to upgrade
            showToast('VIP darajasi yangilandi! Yangi bonuslar mavjud.', 'success');
            closeModal('vipModal');
            checkVIPStatus();
        }

        // Show full history modal
        function showFullHistoryModal() {
            document.getElementById('historyModal').style.display = 'flex';
            loadFullHistory();
        }

        // Load full history
        async function loadFullHistory() {
            // API call
            const content = document.getElementById('fullHistoryContent');
            content.innerHTML = `
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead class="sticky top-0 bg-gray-800">
                            <tr>
                                <th class="px-4 py-2">Sana</th>
                                <th class="px-4 py-2">O'yin</th>
                                <th class="px-4 py-2">Tikish</th>
                                <th class="px-4 py-2">Natija</th>
                                <th class="px-4 py-2">Yutish</th>
                            </tr>
                        </thead>
                        <tbody id="historyTbody">
                            ${gameHistory.slice(0, 50).map(h => `
                                <tr class="border-b border-gray-700 hover:bg-gray-700/30">
                                    <td class="px-4 py-2">${h.timestamp}</td>
                                    <td class="px-4 py-2">${h.game}</td>
                                    <td class="px-4 py-2">${h.bet.toLocaleString()} ${currentCurrency}</td>
                                    <td class="px-4 py-2 ${h.win ? 'text-green-400' : 'text-red-400'}">${h.win ? 'Yutdi' : 'Yutqazdi'}</td>
                                    <td class="px-4 py-2 font-medium ${h.amount > 0 ? 'text-green-400' : 'text-red-400'}">
                                        ${h.amount > 0 ? '+' : ''}${h.amount.toLocaleString()} ${currentCurrency}
                                    </td>
                                </tr>
                            `).join('') || '<tr><td colspan="5" class="py-12 text-center opacity-40">Tarix yo\'q</td></tr>'}
                        </tbody>
                    </table>
                </div>
                <div class="text-center mt-4 text-sm opacity-50">
                    Jami yozuvlar: ${gameHistory.length}
                </div>
            `;
        }

        // Filter history
        function filterHistory(type) {
            let filtered = gameHistory;
            if (type === 'wins') filtered = filtered.filter(h => h.win);
            if (type === 'losses') filtered = filtered.filter(h => !h.win);
            
            // Update table with filtered data
            const tbody = document.getElementById('historyTbody');
            tbody.innerHTML = filtered.slice(0, 50).map(h => `
                <tr class="border-b border-gray-700 hover:bg-gray-700/30">
                    <td class="px-4 py-2">${h.timestamp}</td>
                    <td class="px-4 py-2">${h.game}</td>
                    <td class="px-4 py-2">${h.bet.toLocaleString()} ${currentCurrency}</td>
                    <td class="px-4 py-2 ${h.win ? 'text-green-400' : 'text-red-400'}">${h.win ? 'Yutdi' : 'Yutqazdi'}</td>
                    <td class="px-4 py-2 font-medium ${h.amount > 0 ? 'text-green-400' : 'text-red-400'}">
                        ${h.amount > 0 ? '+' : ''}${h.amount.toLocaleString()} ${currentCurrency}
                    </td>
                </tr>
            `).join('') || '<tr><td colspan="5" class="py-12 text-center opacity-40">Natija topilmadi</td></tr>';
        }

        // Show settings modal
        function showSettings() {
            document.getElementById('settingsModal').style.display = 'flex';
            // Load saved settings
            const savedDark = localStorage.getItem('darkMode') === 'true';
            document.getElementById('darkModeToggle').checked = savedDark;
            if (savedDark) document.body.classList.add('dark');
            document.getElementById('languageSelect').value = localStorage.getItem('language') || 'uz';
            document.getElementById('currencySelect').value = localStorage.getItem('currency') || 'UZS';
            document.getElementById('dailyLimit').value = localStorage.getItem('dailyLimit') || '';
        }

        // Handle settings form
        function handleSettings(e) {
            e.preventDefault();
            // Save settings
            localStorage.setItem('language', document.getElementById('languageSelect').value);
            localStorage.setItem('currency', document.getElementById('currencySelect').value);
            localStorage.setItem('dailyLimit', document.getElementById('dailyLimit').value);
            showToast('Sozlamalar saqlandi', 'success');
            closeModal('settingsModal');
        }

        // Load leaderboard
        async function loadLeaderboard() {
            // API call or simulate
            const leaderboardData = [
                { rank: 1, user: 'Player1', winnings: 1250000, level: 'Diamond', online: true },
                { rank: 2, user: 'GamerPro', winnings: 850000, level: 'Platin', online: false },
                { rank: 3, user: 'LuckyStar', winnings: 620000, level: 'Oltin', online: true },
                // Add more...
            ];

            const tbody = document.getElementById('leaderboardBody');
            tbody.innerHTML = leaderboardData.map((player, index) => `
                <tr class="transition-all hover:bg-purple-500/10">
                    <td class="py-4 px-6 font-bold ${player.rank === 1 ? 'rank-gold' : player.rank === 2 ? 'rank-silver' : 'rank-bronze'}">
                        ${index === 0 ? '' : index === 1 ? '' : index === 2 ? '' : player.rank}
                    </td>
                    <td class="py-4 px-6">
                        <div class="flex items-center">
                            <div class="w-8 h-8 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center mr-3">
                                <span class="font-bold text-sm">${player.user[0]}</span>
                            </div>
                            <span>${player.user}</span>
                        </div>
                    </td>
                    <td class="py-4 px-6 font-bold text-green-400">${player.winnings.toLocaleString()} ${currentCurrency}</td>
                    <td class="py-4 px-6">
                        <span class="px-2 py-1 rounded-full text-xs bg-gradient-to-r from-purple-500 to-pink-500 text-white">${player.level}</span>
                    </td>
                    <td class="py-4 px-6">
                        <i class="${player.online ? 'fas fa-circle text-green-400' : 'far fa-circle text-gray-500'}"></i>
                    </td>
                </tr>
            `).join('') || '<tr><td colspan="5" class="py-12 text-center opacity-40">Reyting bo\'sh</td></tr>';
        }

        // Refresh leaderboard
        function refreshLeaderboard() {
            loadLeaderboard();
            showToast('Reyting yangilandi', 'info');
        }

        // Admin functions (if admin)
        function openAdminPanel() {
            if (!currentUser.isAdmin) return;
            document.getElementById('adminModal').style.display = 'flex';
            loadAdminData();
        }

        async function loadAdminData() {
            // Load users, transactions, etc.
            showToast('Admin panel yuklandi', 'info');
        }

        // More functions for admin...
        async function loadAdminUsers() {
            // Implementation
        }

        async function loadPendingTransactions() {
            // Implementation
        }

        function createPromo() {
            // Implementation
            showToast('Yangi promo yaratildi', 'success');
        }

        async function loadAdminStats() {
            // Implementation
        }

        // Prevent body scroll when modal open
        document.body.classList.toggle('no-scroll', document.querySelector('.modal:not([style*="display: none"])') !== null);

        // Additional utility functions
        function playSound(type) {
            if (sounds[type]) sounds[type]();
        }

        // Export history to CSV (for profile)
        function exportHistory() {
            const csv = gameHistory.map(h => `${h.timestamp},${h.game},${h.bet},${h.win ? 'Yutdi' : 'Yutqazdi'},${h.amount}`).join('\n');
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `luckybet-history-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // Responsible gaming check
        function checkResponsibleGaming(betAmount) {
            const dailyLimit = parseFloat(localStorage.getItem('dailyLimit')) || 0;
            if (dailyLimit > 0 && (currentUser.todayBets || 0) + betAmount > dailyLimit) {
                showToast('Kunlik limit oshib ketdi!', 'error');
                return false;
            }
            return true;
        }

        // Update today bets (simulate)
        currentUser.todayBets = 0;

        // End of script
    </script>

    <!-- Additional scripts for enhanced features -->
    <script>
        // Service worker for PWA (if applicable)
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(() => {});
        }

        // Error handling
        window.addEventListener('error', (e) => {
            console.error('Global error:', e.error);
            showToast('Kutilmagan xatolik. Sahifani yangilang.', 'error');
        });

        // Offline detection
        window.addEventListener('online', () => showToast('Internet ulanishi tiklandi', 'success'));
        window.addEventListener('offline', () => showToast('Internet uzildi. Ofllayn rejim', 'error'));
    </script>
</body>
</html>